<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <!-- 第1行：文档类型声明 -->
    <meta charset="UTF-8">
    <!-- 第2行：字符编码 -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- 第3行：移动设备适配 -->
    <title>肯德基自助点餐系统</title>
    <!-- 第4行：页面标题 -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- 第5行：字体图标库 -->
    <!-- 第6行：添加 LeanCloud SDK -->
    <script src="https://cdn.jsdelivr.net/npm/leancloud-storage@4.13.2/dist/av-min.js"></script>
    <!-- 第7行：LeanCloud JavaScript SDK -->

    <style>
        /* 第8行：开始CSS样式 */
        /* 第9行：重置所有元素的外边距和内边距 */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', 'Microsoft YaHei', sans-serif;
        }
        
        /* 第10行：设置body样式 */
        body {
            background-color: #f8f8f8;
            color: #333;
            line-height: 1.6;
            overflow-x: hidden;
        }
        
        /* 第11行：容器样式 */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        /* 第12行：头部样式 */
        header {
            background: linear-gradient(135deg, #e31837 0%, #c8102e 100%);
            color: white;
            padding: 25px 0;
            text-align: center;
            border-radius: 0 0 15px 15px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            margin-bottom: 30px;
        }
        
        /* 第13行：Logo样式 */
        .logo {
            font-size: 2.8rem;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
        }
        
        /* 第14行：Logo图标样式 */
        .logo i {
            color: #ffcc00;
        }
        
        /* 第15行：头部信息样式 */
        .header-info {
            display: flex;
            justify-content: center;
            gap: 30px;
            flex-wrap: wrap;
            margin-top: 15px;
        }
        
        /* 第16行：信息项样式 */
        .info-item {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 1.1rem;
        }
        
        /* 第17行：信息项图标样式 */
        .info-item i {
            color: #ffcc00;
        }
        
        /* 第18行：头部按钮容器 */
        .header-buttons {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 15px;
        }
        
        /* 第19行：头部按钮样式 */
        .header-btn {
            background-color: rgba(255, 255, 255, 0.2);
            color: white;
            border: 2px solid white;
            padding: 8px 20px;
            border-radius: 30px;
            font-size: 1rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: all 0.3s;
        }
        
        /* 第20行：头部按钮悬停效果 */
        .header-btn:hover {
            background-color: rgba(255, 255, 255, 0.3);
            transform: scale(1.05);
        }
        
        /* 第21行：导航菜单样式 */
        .nav-menu {
            background-color: white;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 30px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
        }
        
        /* 第22行：导航标题样式 */
        .nav-title {
            font-size: 1.6rem;
            color: #e31837;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        /* 第23行：套餐网格布局 */
        .meal-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        /* 第24行：套餐卡片样式 */
        .meal-card {
            background-color: white;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.06);
            transition: all 0.3s ease;
            border-left: 5px solid #ffcc00;
            display: block;
            text-decoration: none;
            color: inherit;
        }
        
        /* 第25行：套餐卡片悬停效果 */
        .meal-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
        }
        
        /* 第26行：套餐头部样式 */
        .meal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }
        
        /* 第27行：套餐名称样式 */
        .meal-name {
            font-size: 1.4rem;
            font-weight: bold;
            color: #e31837;
        }
        
        /* 第28行：套餐价格样式 */
        .meal-price {
            font-size: 1.6rem;
            font-weight: bold;
            color: #e31837;
        }
        
        /* 第29行：套餐描述样式 */
        .meal-description {
            color: #666;
            margin-bottom: 15px;
            font-size: 0.95rem;
        }
        
        /* 第30行：套餐标签样式 */
        .meal-tag {
            display: inline-block;
            background-color: #ffcc00;
            color: #333;
            padding: 4px 10px;
            border-radius: 15px;
            font-size: 0.8rem;
            font-weight: bold;
            margin-right: 8px;
            margin-bottom: 5px;
        }
        
        /* 第31行：返回按钮样式 */
        .back-btn {
            background-color: #e31837;
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 30px;
            font-size: 1.1rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 10px;
            transition: all 0.3s;
            margin-bottom: 20px;
            text-decoration: none;
            width: fit-content;
        }
        
        /* 第32行：返回按钮悬停效果 */
        .back-btn:hover {
            background-color: #c8102e;
            transform: scale(1.03);
        }
        
        /* 第33行：主要内容区域 */
        .main-content {
            display: flex;
            flex-wrap: wrap;
            gap: 25px;
        }
        
        /* 第34行：菜单区域 */
        .menu-section {
            flex: 3;
            min-width: 300px;
        }
        
        /* 第35行：购物车区域 */
        .cart-section {
            flex: 1;
            min-width: 300px;
            background-color: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
            height: fit-content;
            position: sticky;
            top: 20px;
        }
        
        /* 第36行：区域标题样式 */
        .section-title {
            font-size: 1.8rem;
            color: #e31837;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 3px solid #ffcc00;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        /* 第37行：区域标题图标样式 */
        .section-title i {
            color: #ffcc00;
        }
        
        /* 第38行：套餐选项区域 */
        .meal-options {
            margin-bottom: 30px;
        }
        
        /* 第39行：选项组样式 */
        .option-group {
            margin-bottom: 15px;
            padding: 15px;
            background-color: #f9f9f9;
            border-radius: 8px;
            border-left: 4px solid #e31837;
        }
        
        /* 第40行：选项标题样式 */
        .option-title {
            font-weight: bold;
            margin-bottom: 10px;
            color: #444;
            font-size: 1.1rem;
        }
        
        /* 第41行：选项规则样式 */
        .option-rules {
            font-size: 0.9rem;
            color: #e31837;
            margin-bottom: 10px;
            padding: 5px 10px;
            background-color: #ffe6e6;
            border-radius: 4px;
            display: inline-block;
        }
        
        /* 第42行：选项项目容器 */
        .option-items {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
        }
        
        /* 第43行：选项项目样式 */
        .option-item {
            background-color: #f5f5f5;
            padding: 10px 15px;
            border-radius: 20px;
            font-size: 0.95rem;
            transition: all 0.2s;
            cursor: pointer;
            border: 1px solid #ddd;
            display: flex;
            align-items: center;
            justify-content: space-between;
            min-width: 180px;
            position: relative;
        }
        
        /* 第44行：选项项目悬停效果 */
        .option-item:hover {
            background-color: #e9e9e9;
        }
        
        /* 第45行：选项项目选中状态 */
        .option-item.selected {
            background-color: #e31837;
            color: white;
            border-color: #e31837;
        }
        
        /* 第46行：选择计数器 */
        .selection-counter {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-left: 10px;
        }
        
        /* 第47行：计数器按钮样式 */
        .counter-btn {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            border: none;
            background-color: white;
            color: #e31837;
            font-weight: bold;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        /* 第48行：计数器按钮禁用状态 */
        .counter-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        
        /* 第49行：计数器值样式 */
        .counter-value {
            font-weight: bold;
            min-width: 20px;
            text-align: center;
        }
        
        /* 第50行：加入购物车按钮 */
        .add-to-cart {
            background-color: #e31837;
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 30px;
            font-size: 1.1rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 10px;
            transition: all 0.3s;
            width: 100%;
            justify-content: center;
        }
        
        /* 第51行：加入购物车按钮悬停效果 */
        .add-to-cart:hover {
            background-color: #c8102e;
            transform: scale(1.03);
        }
        
        /* 第52行：加入购物车按钮禁用状态 */
        .add-to-cart:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }
        
        /* 第53行：购物车项目容器 */
        .cart-items {
            max-height: 300px;
            overflow-y: auto;
            margin-bottom: 20px;
        }
        
        /* 第54行：购物车项目样式 */
        .cart-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 0;
            border-bottom: 1px dashed #ddd;
        }
        
        /* 第55行：最后一个购物车项目 */
        .cart-item:last-child {
            border-bottom: none;
        }
        
        /* 第56行：购物车项目名称 */
        .cart-item-name {
            flex: 2;
            font-weight: 500;
        }
        
        /* 第57行：购物车项目价格 */
        .cart-item-price {
            flex: 1;
            text-align: right;
            font-weight: bold;
            color: #e31837;
        }
        
        /* 第58行：购物车项目删除按钮 */
        .cart-item-remove {
            background: none;
            border: none;
            color: #999;
            cursor: pointer;
            font-size: 1.2rem;
            margin-left: 10px;
        }
        
        /* 第59行：购物车总计 */
        .cart-total {
            display: flex;
            justify-content: space-between;
            font-size: 1.5rem;
            font-weight: bold;
            margin-top: 20px;
            padding-top: 15px;
            border-top: 2px solid #eee;
        }
        
        /* 第60行：总计价格样式 */
        .total-price {
            color: #e31837;
        }
        
        /* 第61行：结算按钮样式 */
        .checkout-btn {
            background-color: #ffcc00;
            color: #333;
            border: none;
            padding: 15px;
            border-radius: 30px;
            font-size: 1.2rem;
            font-weight: bold;
            cursor: pointer;
            width: 100%;
            margin-top: 20px;
            transition: all 0.3s;
        }
        
        /* 第62行：结算按钮悬停效果 */
        .checkout-btn:hover {
            background-color: #e6b800;
            transform: scale(1.03);
        }
        
        /* 第63行：结算按钮禁用状态 */
        .checkout-btn:disabled {
            background-color: #ccc;
            cursor: not-allowed;
            transform: none;
        }
        
        /* 第64行：配送表单样式 */
        .delivery-form {
            background-color: white;
            border-radius: 15px;
            padding: 25px;
            margin-top: 30px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
        }
        
        /* 第65行：表单组样式 */
        .form-group {
            margin-bottom: 20px;
        }
        
        /* 第66行：表单标签样式 */
        .form-label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
        }
        
        /* 第67行：必填字段样式 */
        .required {
            color: #e31837;
        }
        
        /* 第68行：表单输入框样式 */
        .form-input, .form-select {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-size: 1rem;
            transition: all 0.3s;
        }
        
        /* 第69行：表单输入框焦点状态 */
        .form-input:focus, .form-select:focus {
            outline: none;
            border-color: #e31837;
            box-shadow: 0 0 0 2px rgba(227, 24, 55, 0.2);
        }
        
        /* 第70行：订单类型选择器 */
        .order-type {
            display: flex;
            gap: 20px;
            margin-bottom: 20px;
        }
        
        /* 第71行：订单类型标签样式 */
        .order-type label {
            display: flex;
            align-items: center;
            gap: 8px;
            cursor: pointer;
            padding: 10px 15px;
            border-radius: 8px;
            border: 2px solid #ddd;
            transition: all 0.3s;
        }
        
        /* 第72行：订单类型标签悬停效果 */
        .order-type label:hover {
            border-color: #e31837;
        }
        
        /* 第73行：订单类型选中状态 */
        .order-type input:checked + span {
            font-weight: bold;
            color: #e31837;
        }
        
        /* 第74行：配送和自提字段区域 */
        .delivery-fields, .pickup-fields {
            transition: all 0.3s;
        }
        
        /* 第75行：隐藏类 */
        .hidden {
            display: none;
        }
        
        /* 第76行：门店选择容器 */
        .store-selection {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
        }
        
        /* 第77行：门店选择表单组 */
        .store-selection .form-group {
            flex: 1;
            min-width: 200px;
        }
        
        /* 第78行：信息方式选择器 */
        .info-method-selector {
            display: flex;
            gap: 15px;
            margin-top: 10px;
        }
        
        /* 第79行：方式选项样式 */
        .method-option {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 10px 20px;
            border: 2px solid #ddd;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        /* 第80行：方式选项悬停效果 */
        .method-option:hover {
            border-color: #e31837;
            background-color: #fff5f5;
        }
        
        /* 第81行：方式选项选中状态 */
        .method-option input:checked + span {
            font-weight: bold;
            color: #e31837;
        }
        
        /* 第82行：方式选项选中输入框 */
        .method-option input:checked {
            accent-color: #e31837;
        }
        
        /* 第83行：截图上传区域 */
        .screenshot-upload-area {
            border: 2px dashed #ddd;
            border-radius: 10px;
            padding: 30px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            background-color: #f9f9f9;
        }
        
        /* 第84行：截图上传区域悬停效果 */
        .screenshot-upload-area:hover {
            border-color: #e31837;
            background-color: #fff5f5;
        }
        
        /* 第85行：截图上传区域图标 */
        .screenshot-upload-area i {
            font-size: 48px;
            color: #e31837;
            margin-bottom: 10px;
        }
        
        /* 第86行：上传提示文字 */
        .upload-hint {
            font-size: 0.9rem;
            color: #666;
            margin-top: 5px;
        }
        
        /* 第87行：截图预览区域 */
        .screenshot-preview {
            position: relative;
            margin-top: 15px;
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 10px;
            background-color: #f9f9f9;
            max-width: 300px;
        }
        
        /* 第88行：截图预览图片 */
        .screenshot-preview img {
            width: 100%;
            border-radius: 5px;
            display: block;
            max-height: 200px;
            object-fit: contain;
        }
        
        /* 第89行：移除截图按钮 */
        .remove-screenshot {
            position: absolute;
            top: -10px;
            right: -10px;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            background-color: #e31837;
            color: white;
            border: none;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        /* 第90行：表单提示文字 */
        .form-hint {
            font-size: 0.9rem;
            color: #666;
            margin-top: 8px;
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        /* 第91行：表单提示图标 */
        .form-hint i {
            color: #ffcc00;
        }
        
        /* 第92行：使用说明样式 */
        .instructions {
            font-size: 0.9rem;
            color: #666;
            margin-top: 30px;
            padding: 15px;
            background-color: #f9f9f9;
            border-radius: 8px;
            border-left: 4px solid #ffcc00;
        }
        
        /* 第93行：使用说明列表项 */
        .instructions li {
            margin-bottom: 5px;
        }
        
        /* 第94行：页脚样式 */
        .footer {
            text-align: center;
            margin-top: 40px;
            padding: 20px;
            color: #666;
            border-top: 1px solid #eee;
        }
        
        /* 第95行：高亮提示样式 */
        .highlight {
            color: #e31837;
            font-weight: bold;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 8px;
            background-color: #fff5f5;
            padding: 10px;
            border-radius: 8px;
            border-left: 4px solid #ffcc00;
        }
        
        /* 第96行：高亮提示图标 */
        .highlight i {
            color: #ffcc00;
        }
        
        /* 第97行：选择状态提示 */
        .selection-status {
            font-size: 0.9rem;
            color: #666;
            margin-top: 10px;
            padding: 5px 10px;
            background-color: #f0f0f0;
            border-radius: 4px;
            display: inline-block;
        }
        
        /* 第98行：有效选择状态 */
        .selection-status.valid {
            background-color: #e6f7e6;
            color: #2e7d32;
        }
        
        /* 第99行：无效选择状态 */
        .selection-status.invalid {
            background-color: #ffebee;
            color: #c62828;
        }
        
        /* 第100行：固定搭配项目样式 */
        .fixed-combo-items {
            padding: 15px;
            background-color: #f9f9f9;
            border-radius: 8px;
            border-left: 4px solid #4CAF50;
        }
        
        /* 第101行：固定搭配单项样式 */
        .fixed-combo-item {
            padding: 8px 0;
            border-bottom: 1px dashed #ddd;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        /* 第102行：最后一个固定搭配项 */
        .fixed-combo-item:last-child {
            border-bottom: none;
        }
        
        /* 第103行：固定搭配项名称 */
        .fixed-combo-item-name {
            font-weight: 500;
        }
        
        /* 第104行：固定搭配项数量 */
        .fixed-combo-item-qty {
            color: #e31837;
            font-weight: bold;
        }
        
        /* 第105行：我的订单区域 */
        .my-orders-section {
            background-color: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
        }
        
        /* 第106行：订单搜索区域 */
        .orders-search {
            margin-bottom: 20px;
        }
        
        /* 第107行：搜索框容器 */
        .search-box {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
        }
        
        /* 第108行：搜索输入框 */
        .search-input {
            flex: 1;
            padding: 12px 15px;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-size: 1rem;
        }
        
        /* 第109行：搜索按钮 */
        .search-btn {
            background-color: #e31837;
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        /* 第110行：搜索按钮悬停效果 */
        .search-btn:hover {
            background-color: #c8102e;
        }
        
        /* 第111行：订单筛选标签 */
        .order-filter-tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        
        /* 第112行：订单筛选标签按钮 */
        .order-filter-tab {
            padding: 8px 16px;
            background-color: #f0f0f0;
            border: none;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        /* 第113行：订单筛选标签悬停效果 */
        .order-filter-tab:hover {
            background-color: #e0e0e0;
        }
        
        /* 第114行：订单筛选标签激活状态 */
        .order-filter-tab.active {
            background-color: #e31837;
            color: white;
        }
        
        /* 第115行：用户订单项样式 */
        .user-order-item {
            background-color: white;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.08);
            border-left: 5px solid #ffcc00;
        }
        
        /* 第116行：用户订单头部 */
        .user-order-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            flex-wrap: wrap;
            gap: 10px;
        }
        
        /* 第117行：用户订单ID */
        .user-order-id {
            font-weight: bold;
            color: #333;
            font-size: 1.2rem;
        }
        
        /* 第118行：用户订单时间 */
        .user-order-time {
            color: #666;
            font-size: 0.95rem;
        }
        
        /* 第119行：用户订单状态 */
        .user-order-status {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: bold;
        }
        
        /* 第120行：新订单状态样式 */
        .user-status-new {
            background-color: #ffebee;
            color: #e31837;
        }
        
        /* 第121行：处理中订单状态样式 */
        .user-status-processing {
            background-color: #fff3e0;
            color: #f57c00;
        }
        
        /* 第122行：已完成订单状态样式 */
        .user-status-completed {
            background-color: #e8f5e9;
            color: #2e7d32;
        }
        
        /* 第123行：用户订单项目列表 */
        .user-order-items {
            margin-bottom: 15px;
            padding-bottom: 15px;
            border-bottom: 1px solid #eee;
        }
        
        /* 第124行：用户订单项目详情 */
        .user-order-item-detail {
            padding: 8px 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px dashed #eee;
        }
        
        /* 第125行：最后一个用户订单项目详情 */
        .user-order-item-detail:last-child {
            border-bottom: none;
        }
        
        /* 第126行：用户订单项目名称 */
        .user-order-item-name {
            flex: 2;
        }
        
        /* 第127行：用户订单项目价格 */
        .user-order-item-price {
            flex: 1;
            text-align: right;
            font-weight: bold;
            color: #e31837;
        }
        
        /* 第128行：用户订单信息区域 */
        .user-order-info {
            background-color: #f9f9f9;
            padding: 15px;
            border-radius: 8px;
            margin-top: 15px;
        }
        
        /* 第129行：用户订单信息段落 */
        .user-order-info p {
            margin-bottom: 5px;
        }
        
        /* 第130行：用户订单总计 */
        .user-order-total {
            font-weight: bold;
            color: #e31837;
            font-size: 1.2rem;
            margin-top: 15px;
            padding-top: 15px;
            border-top: 2px solid #eee;
            text-align: right;
        }
        
        /* 第131行：无订单提示 */
        .no-user-orders {
            text-align: center;
            padding: 40px 20px;
            color: #666;
        }
        
        /* 第132行：无订单提示图标 */
        .no-user-orders i {
            font-size: 4rem;
            color: #ddd;
            margin-bottom: 15px;
        }
        
        /* 第133行：用户ID信息区域 */
        .user-id-info {
            background-color: #f0f0f0;
            padding: 10px 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            font-size: 0.9rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        /* 第134行：用户ID标签 */
        .user-id-label {
            font-weight: bold;
            color: #666;
        }
        
        /* 第135行：用户ID值 */
        .user-id-value {
            font-family: monospace;
            background-color: #fff;
            padding: 5px 10px;
            border-radius: 4px;
            border: 1px solid #ddd;
        }
        
        /* 第136行：管理员面板 */
        .admin-panel {
            position: fixed;
            top: 0;
            right: 0;
            width: 100%;
            max-width: 1200px;
            height: 100vh;
            background-color: white;
            z-index: 2000;
            box-shadow: -5px 0 20px rgba(0, 0, 0, 0.2);
            transform: translateX(100%);
            transition: transform 0.3s ease;
            overflow-y: auto;
            display: none;
        }
        
        /* 第137行：管理员面板激活状态 */
        .admin-panel.active {
            transform: translateX(0);
            display: block;
        }
        
        /* 第138行：面板遮罩层 */
        .panel-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 1999;
            display: none;
        }
        
        /* 第139行：面板遮罩层激活状态 */
        .panel-overlay.active {
            display: block;
        }
        
        /* 第140行：面板头部 */
        .panel-header {
            background: linear-gradient(135deg, #e31837 0%, #c8102e 100%);
            color: white;
            padding: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: sticky;
            top: 0;
            z-index: 10;
        }
        
        /* 第141行：面板头部标题 */
        .panel-header h2 {
            font-size: 1.8rem;
            margin: 0;
        }
        
        /* 第142行：关闭面板按钮 */
        .close-panel {
            background: none;
            border: none;
            color: white;
            font-size: 2rem;
            cursor: pointer;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            transition: background-color 0.3s;
        }
        
        /* 第143行：关闭面板按钮悬停效果 */
        .close-panel:hover {
            background-color: rgba(255, 255, 255, 0.2);
        }
        
        /* 第144行：面板内容区域 */
        .panel-content {
            padding: 20px;
        }
        
        /* 第145行：管理员标签页容器 */
        .admin-tabs {
            display: flex;
            border-bottom: 2px solid #eee;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        
        /* 第146行：管理员标签页按钮 */
        .admin-tab {
            padding: 12px 24px;
            background: none;
            border: none;
            font-size: 1.1rem;
            cursor: pointer;
            border-bottom: 3px solid transparent;
            transition: all 0.3s;
            color: #666;
            font-weight: 500;
        }
        
        /* 第147行：管理员标签页悬停效果 */
        .admin-tab:hover {
            color: #e31837;
            background-color: #fff5f5;
        }
        
        /* 第148行：管理员标签页激活状态 */
        .admin-tab.active {
            color: #e31837;
            border-bottom-color: #e31837;
            font-weight: bold;
        }
        
        /* 第149行：管理员标签内容区域 */
        .admin-tab-content {
            display: none;
        }
        
        /* 第150行：管理员标签内容激活状态 */
        .admin-tab-content.active {
            display: block;
        }
        
        /* 第151行：订单筛选器 */
        .order-filters {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        
        /* 第152行：筛选按钮 */
        .filter-btn {
            padding: 8px 16px;
            background-color: #f0f0f0;
            border: none;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        /* 第153行：筛选按钮悬停效果 */
        .filter-btn:hover {
            background-color: #e0e0e0;
        }
        
        /* 第154行：筛选按钮激活状态 */
        .filter-btn.active {
            background-color: #e31837;
            color: white;
        }
        
        /* 第155行：订单容器网格布局 */
        .orders-container {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
            min-height: 300px;
        }
        
        /* 第156行：管理员订单项样式 */
        .admin-order-item {
            background-color: white;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.08);
            border-left: 5px solid #ffcc00;
            transition: all 0.3s;
        }
        
        /* 第157行：管理员订单项悬停效果 */
        .admin-order-item:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }
        
        /* 第158行：订单ID样式 */
        .order-id {
            font-weight: bold;
            color: #333;
            font-size: 1.2rem;
            margin-bottom: 5px;
        }
        
        /* 第159行：订单时间样式 */
        .order-time {
            color: #666;
            font-size: 0.9rem;
            margin-bottom: 15px;
        }
        
        /* 第160行：订单状态样式 */
        .order-status {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: bold;
            margin-bottom: 15px;
        }
        
        /* 第161行：新订单状态 */
        .status-new {
            background-color: #ffebee;
            color: #e31837;
        }
        
        /* 第162行：处理中订单状态 */
        .status-processing {
            background-color: #fff3e0;
            color: #f57c00;
        }
        
        /* 第163行：已完成订单状态 */
        .status-completed {
            background-color: #e8f5e9;
            color: #2e7d32;
        }
        
        /* 第164行：订单详情区域 */
        .order-details {
            margin-bottom: 15px;
        }
        
        /* 第165行：订单项目列表 */
        .order-items {
            margin-bottom: 10px;
        }
        
        /* 第166行：订单项目详情 */
        .order-item-detail {
            padding: 5px 0;
            border-bottom: 1px dashed #eee;
        }
        
        /* 第167行：订单总计 */
        .order-total {
            font-weight: bold;
            color: #e31837;
            font-size: 1.2rem;
            margin-top: 10px;
            padding-top: 10px;
            border-top: 2px solid #eee;
        }
        
        /* 第168行：客户信息区域 */
        .customer-info {
            background-color: #f9f9f9;
            padding: 15px;
            border-radius: 8px;
            margin-top: 15px;
        }
        
        /* 第169行：客户信息段落 */
        .customer-info p {
            margin-bottom: 5px;
        }
        
        /* 第170行：截图容器 */
        .screenshot-container {
            margin-top: 15px;
        }
        
        /* 第171行：截图图片样式 */
        .screenshot-container img {
            width: 100%;
            border-radius: 8px;
            border: 1px solid #ddd;
            cursor: pointer;
            transition: transform 0.3s;
        }
        
        /* 第172行：截图图片悬停效果 */
        .screenshot-container img:hover {
            transform: scale(1.02);
        }
        
        /* 第173行：无订单提示 */
        .no-orders {
            text-align: center;
            padding: 40px 20px;
            color: #666;
            grid-column: 1 / -1;
            width: 100%;
        }
        
        /* 第174行：无订单提示图标 */
        .no-orders i {
            font-size: 4rem;
            color: #ddd;
            margin-bottom: 15px;
        }
        
        /* 第175行：管理员按钮 */
        .admin-btn {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background-color: #333;
            color: white;
            border: none;
            padding: 15px 25px;
            border-radius: 30px;
            font-size: 1rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 10px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
            transition: all 0.3s;
            z-index: 1000;
        }
        
        /* 第176行：管理员按钮悬停效果 */
        .admin-btn:hover {
            background-color: #555;
            transform: scale(1.05);
        }
        
        /* 第177行：新订单徽章 */
        .new-order-badge {
            position: absolute;
            top: -8px;
            right: -8px;
            background-color: #e31837;
            color: white;
            border-radius: 50%;
            width: 24px;
            height: 24px;
            font-size: 0.8rem;
            display: flex;
            align-items: center;
            justify-content: center;
            animation: pulse 2s infinite;
        }
        
        /* 第178行：脉冲动画关键帧 */
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }
        
        /* 第179行：图片模态框 */
        .image-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.9);
            z-index: 3000;
            display: none;
            justify-content: center;
            align-items: center;
        }
        
        /* 第180行：图片模态框激活状态 */
        .image-modal.active {
            display: flex;
        }
        
        /* 第181行：模态框图片样式 */
        .modal-image {
            max-width: 90%;
            max-height: 90%;
            border-radius: 8px;
        }
        
        /* 第182行：关闭模态框按钮 */
        .close-modal {
            position: absolute;
            top: 20px;
            right: 20px;
            background: none;
            border: none;
            color: white;
            font-size: 3rem;
            cursor: pointer;
        }
        
        /* 第183行：密码模态框 */
        .password-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            z-index: 3000;
            display: none;
            justify-content: center;
            align-items: center;
        }
        
        /* 第184行：密码模态框激活状态 */
        .password-modal.active {
            display: flex;
        }
        
        /* 第185行：密码输入框容器 */
        .password-box {
            background-color: white;
            border-radius: 15px;
            padding: 40px;
            width: 90%;
            max-width: 400px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            text-align: center;
        }
        
        /* 第186行：密码框标题 */
        .password-box h3 {
            color: #e31837;
            margin-bottom: 20px;
            font-size: 1.8rem;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }
        
        /* 第187行：密码输入框 */
        .password-input {
            width: 100%;
            padding: 15px;
            font-size: 1.2rem;
            border: 2px solid #ddd;
            border-radius: 10px;
            margin-bottom: 20px;
            text-align: center;
            letter-spacing: 3px;
        }
        
        /* 第188行：密码输入框焦点状态 */
        .password-input:focus {
            outline: none;
            border-color: #e31837;
            box-shadow: 0 0 0 3px rgba(227, 24, 55, 0.2);
        }
        
        /* 第189行：密码确认按钮 */
        .password-btn {
            background-color: #e31837;
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 30px;
            font-size: 1.2rem;
            font-weight: bold;
            cursor: pointer;
            width: 100%;
            transition: all 0.3s;
        }
        
        /* 第190行：密码确认按钮悬停效果 */
        .password-btn:hover {
            background-color: #c8102e;
            transform: scale(1.03);
        }
        
        /* 第191行：密码错误提示 */
        .password-error {
            color: #e31837;
            margin-top: 15px;
            font-weight: bold;
            display: none;
        }
        
        /* 第192行：套餐页面容器 */
        .meal-page-container {
            display: none;
        }
        
        /* 第193行：套餐页面容器激活状态 */
        .meal-page-container.active {
            display: block;
        }
        
        /* 第194行：套餐管理区域 */
        .meal-management {
            margin-top: 20px;
        }
        
        /* 第195行：套餐列表 */
        .meal-list {
            margin-bottom: 30px;
        }
        
        /* 第196行：套餐列表项 */
        .meal-list-item {
            background-color: #f9f9f9;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-left: 4px solid #e31837;
        }
        
        /* 第197行：套餐列表项信息 */
        .meal-list-item-info {
            flex: 1;
        }
        
        /* 第198行：套餐列表项操作按钮 */
        .meal-list-item-actions {
            display: flex;
            gap: 10px;
        }
        
        /* 第199行：操作按钮通用样式 */
        .action-btn {
            padding: 8px 16px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.3s;
        }
        
        /* 第200行：编辑按钮样式 */
        .edit-btn {
            background-color: #ffcc00;
            color: #333;
        }
        
        /* 第201行：编辑按钮悬停效果 */
        .edit-btn:hover {
            background-color: #e6b800;
        }
        
        /* 第202行：删除按钮样式 */
        .delete-btn {
            background-color: #e31837;
            color: white;
        }
        
        /* 第203行：删除按钮悬停效果 */
        .delete-btn:hover {
            background-color: #c8102e;
        }
        
        /* 第204行：添加按钮样式 */
        .add-btn {
            background-color: #4CAF50;
            color: white;
        }
        
        /* 第205行：添加按钮悬停效果 */
        .add-btn:hover {
            background-color: #3d8b40;
        }
        
        /* 第206行：套餐表单 */
        .meal-form {
            background-color: #f9f9f9;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 30px;
        }
        
        /* 第207行：表单行 */
        .form-row {
            display: flex;
            gap: 20px;
            margin-bottom: 15px;
            flex-wrap: wrap;
        }
        
        /* 第208行：表单行内的表单组 */
        .form-row .form-group {
            flex: 1;
            min-width: 200px;
        }
        
        /* 第209行：选项组管理区域 */
        .option-groups-management {
            margin-top: 30px;
        }
        
        /* 第210行：选项组项 */
        .option-group-item {
            background-color: #f0f0f0;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 15px;
            border-left: 4px solid #4CAF50;
        }
        
        /* 第211行：选项组头部 */
        .option-group-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }
        
        /* 第212行：选项组标题 */
        .option-group-title {
            font-weight: bold;
            color: #333;
            font-size: 1.1rem;
        }
        
        /* 第213行：选项项目列表 */
        .option-items-list {
            margin-top: 10px;
            padding-left: 20px;
        }
        
        /* 第214行：选项项目列表项 */
        .option-item-list-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px 0;
            border-bottom: 1px dashed #ddd;
        }
        
        /* 第215行：最后一个选项项目列表项 */
        .option-item-list-item:last-child {
            border-bottom: none;
        }
        
        /* 第216行：无套餐提示 */
        .no-meals-message {
            text-align: center;
            padding: 30px;
            color: #666;
            background-color: #f9f9f9;
            border-radius: 8px;
            border: 2px dashed #ddd;
        }
        
        /* 第217行：无套餐提示图标 */
        .no-meals-message i {
            font-size: 3rem;
            color: #ddd;
            margin-bottom: 15px;
        }
        
        /* 第218行：固定项目管理区域 */
        .fixed-items-management {
            margin-top: 20px;
            padding: 15px;
            background-color: #f0f0f0;
            border-radius: 8px;
            border-left: 4px solid #4CAF50;
        }
        
        /* 第219行：固定项目列表 */
        .fixed-item-list {
            margin-top: 10px;
        }
        
        /* 第220行：固定项目列表项 */
        .fixed-item-list-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px 0;
            border-bottom: 1px dashed #ddd;
        }
        
        /* 第221行：最后一个固定项目列表项 */
        .fixed-item-list-item:last-child {
            border-bottom: none;
        }
        
        /* 第222行：状态切换开关容器 */
        .status-toggle {
            position: relative;
            display: inline-block;
            width: 60px;
            height: 30px;
        }
        
        /* 第223行：状态切换开关输入框 */
        .status-toggle input {
            opacity: 0;
            width: 0;
            height: 0;
        }
        
        /* 第224行：状态切换滑块 */
        .status-slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            transition: .4s;
            border-radius: 34px;
        }
        
        /* 第225行：状态切换滑块按钮 */
        .status-slider:before {
            position: absolute;
            content: "";
            height: 22px;
            width: 22px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }
        
        /* 第226行：状态切换开关选中状态 */
        input:checked + .status-slider {
            background-color: #4CAF50;
        }
        
        /* 第227行：状态切换开关选中状态滑块按钮 */
        input:checked + .status-slider:before {
            transform: translateX(30px);
        }
        
        /* 第228行：状态标签 */
        .status-label {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-right: 15px;
        }
        
        /* 第229行：激活状态文字 */
        .status-active {
            color: #4CAF50;
            font-weight: bold;
        }
        
        /* 第230行：未激活状态文字 */
        .status-inactive {
            color: #f44336;
            font-weight: bold;
        }
        
        /* 第231行：下架套餐卡片样式 */
        .meal-card.inactive {
            opacity: 0.6;
            border-left: 5px solid #ccc;
            position: relative;
        }
        
        /* 第232行：下架套餐卡片标识 */
        .meal-card.inactive:after {
            content: "已下架";
            position: absolute;
            top: 10px;
            right: 10px;
            background-color: #f44336;
            color: white;
            padding: 3px 8px;
            border-radius: 12px;
            font-size: 0.8rem;
            font-weight: bold;
        }
        
        /* 第233行：下架套餐卡片悬停效果 */
        .meal-card.inactive:hover {
            transform: none;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.06);
            cursor: not-allowed;
        }
        
        /* 第234行：套餐筛选器 */
        .meal-filters {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        
        /* 第235行：套餐筛选按钮 */
        .meal-filter-btn {
            padding: 8px 16px;
            background-color: #f0f0f0;
            border: none;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        /* 第236行：套餐筛选按钮悬停效果 */
        .meal-filter-btn:hover {
            background-color: #e0e0e0;
        }
        
        /* 第237行：套餐筛选按钮激活状态 */
        .meal-filter-btn.active {
            background-color: #e31837;
            color: white;
        }
        
        /* 第238行：移动端响应式设计 */
        @media (max-width: 768px) {
            .main-content {
                flex-direction: column;
            }
            
            .cart-section {
                position: static;
            }
            
            .logo {
                font-size: 2rem;
            }
            
            .meal-card {
                padding: 15px;
            }
            
            .store-selection {
                flex-direction: column;
            }
            
            .store-selection .form-group {
                min-width: 100%;
            }
            
            .info-method-selector {
                flex-direction: column;
            }
            
            .admin-panel {
                width: 100%;
            }
            
            .orders-container {
                grid-template-columns: 1fr;
            }
            
            .admin-btn span {
                display: none;
            }
            
            .admin-btn {
                padding: 15px;
                border-radius: 50%;
                width: 60px;
                height: 60px;
                justify-content: center;
            }
            
            .option-items {
                flex-direction: column;
            }
            
            .option-item {
                min-width: 100%;
                justify-content: space-between;
            }
            
            .password-box {
                padding: 25px;
                width: 95%;
            }
            
            .meal-grid {
                grid-template-columns: 1fr;
            }
            
            .form-row {
                flex-direction: column;
            }
            
            .form-row .form-group {
                min-width: 100%;
            }
            
            .meal-list-item {
                flex-direction: column;
                align-items: flex-start;
                gap: 10px;
            }
            
            .meal-list-item-actions {
                width: 100%;
                justify-content: space-between;
            }
            
            .option-group-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 10px;
            }
            
            .header-buttons {
                flex-direction: column;
                align-items: center;
            }
            
            .header-btn {
                width: 200px;
                justify-content: center;
            }
        }
        /* 第239行：CSS样式结束 */
    </style>
</head>
<body>
    <!-- 第240行：页面主体开始 -->
    <header>
        <!-- 第241行：页面头部开始 -->
        <div class="container">
            <!-- 第242行：头部容器开始 -->
            <div class="logo">
                <!-- 第243行：Logo区域开始 -->
                <i class="fas fa-utensils"></i>
                <!-- 第244行：餐具图标 -->
                <h1>肯德基自助点餐系统</h1>
                <!-- 第245行：主标题 -->
                <i class="fas fa-hamburger"></i>
                <!-- 第246行：汉堡图标 -->
            </div>
            <!-- 第247行：Logo区域结束 -->
            <p>宅急送免配送费 | 多人餐团餐优惠 | 外送到家</p>
            <!-- 第248行：宣传标语 -->
            <div class="header-info">
                <!-- 第249行：头部信息区域开始 -->
                <div class="info-item">
                    <!-- 第250行：信息项1开始 -->
                    <i class="fas fa-shipping-fast"></i>
                    <!-- 第251行：配送图标 -->
                    <span>宅急送免配送费</span>
                    <!-- 第252行：配送信息 -->
                </div>
                <!-- 第253行：信息项1结束 -->
                <div class="info-item">
                    <!-- 第254行：信息项2开始 -->
                    <i class="fas fa-users"></i>
                    <!-- 第255行：用户图标 -->
                    <span>多人餐团餐优惠</span>
                    <!-- 第256行：团餐信息 -->
                </div>
                <!-- 第257行：信息项2结束 -->
                <div class="info-item">
                    <!-- 第258行：信息项3开始 -->
                    <i class="fas fa-store"></i>
                    <!-- 第259行：门店图标 -->
                    <span>到店自提</span>
                    <!-- 第260行：自提信息 -->
                </div>
                <!-- 第261行：信息项3结束 -->
            </div>
            <!-- 第262行：头部信息区域结束 -->
            
            <div class="header-buttons">
                <!-- 第263行：头部按钮区域开始 -->
                <button class="header-btn" id="viewOrdersBtn">
                    <!-- 第264行：查看订单按钮 -->
                    <i class="fas fa-clipboard-list"></i>
                    <!-- 第265行：订单列表图标 -->
                    查看我的订单
                    <!-- 第266行：按钮文字 -->
                </button>
                <!-- 第267行：查看订单按钮结束 -->
                <button class="header-btn" id="viewHomeBtn" style="display: none;">
                    <!-- 第268行：返回首页按钮 -->
                    <i class="fas fa-home"></i>
                    <!-- 第269行：首页图标 -->
                    返回首页
                    <!-- 第270行：按钮文字 -->
                </button>
                <!-- 第271行：返回首页按钮结束 -->
            </div>
            <!-- 第272行：头部按钮区域结束 -->
        </div>
        <!-- 第273行：头部容器结束 -->
    </header>
    <!-- 第274行：页面头部结束 -->
    
    <div class="container">
        <!-- 第275行：主要内容容器开始 -->
        <div id="homePage" class="meal-page-container active">
            <!-- 第276行：首页开始 -->
            <div class="nav-menu">
                <!-- 第277行：导航菜单开始 -->
                <h2 class="nav-title">
                    <!-- 第278行：导航标题 -->
                    <i class="fas fa-utensils"></i>
                    <!-- 第279行：餐具图标 -->
                    选择您想要的套餐
                    <!-- 第280行：标题文字 -->
                </h2>
                <!-- 第281行：导航标题结束 -->
                <div class="instructions">
                    <!-- 第282行：使用说明区域开始 -->
                    <p><strong>下单步骤：</strong></p>
                    <!-- 第283行：步骤标题 -->
                    <ol>
                        <!-- 第284行：有序列表开始 -->
                        <li>选择您想要的套餐</li>
                        <!-- 第285行：步骤1 -->
                        <li>在套餐中选择具体的汉堡、小吃和饮品（点击选项，使用+/-按钮调整数量）</li>
                        <!-- 第286行：步骤2 -->
                        <li>确保每个选项组的选择数量符合要求（会有提示）</li>
                        <!-- 第287行：步骤3 -->
                        <li>点击"加入购物车"按钮</li>
                        <!-- 第288行：步骤4 -->
                        <li>在右侧购物车确认订单并选择配送方式</li>
                        <!-- 第289行：步骤5 -->
                        <li>提交订单完成购买</li>
                        <!-- 第290行：步骤6 -->
                        <li>提交后可以点击上方"查看我的订单"查看订单状态</li>
                        <!-- 第291行：步骤7 -->
                    </ol>
                    <!-- 第292行：有序列表结束 -->
                </div>
                <!-- 第293行：使用说明区域结束 -->
            </div>
            <!-- 第294行：导航菜单结束 -->
            
            <div class="meal-grid" id="mealGrid">
                <!-- 第295行：套餐网格容器开始 -->
                <div class="loading-message" id="loadingMeals">
                    <!-- 第296行：加载提示开始 -->
                    <i class="fas fa-spinner fa-spin"></i> 
                    <!-- 第297行：加载图标 -->
                    正在加载套餐...
                    <!-- 第298行：加载文字 -->
                </div>
                <!-- 第299行：加载提示结束 -->
            </div>
            <!-- 第300行：套餐网格容器结束 -->
            
            <div class="no-meals-message" id="noMealsMessage" style="display: none;">
                <!-- 第301行：无套餐提示开始 -->
                <i class="fas fa-utensils"></i>
                <!-- 第302行：餐具图标 -->
                <h3>暂无套餐</h3>
                <!-- 第303行：提示标题 -->
                <p>请联系管理员添加套餐</p>
                <!-- 第304行：提示文字 -->
            </div>
            <!-- 第305行：无套餐提示结束 -->
        </div>
        <!-- 第306行：首页结束 -->
        
        <div id="mealDetailPage" class="meal-page-container">
            <!-- 第307行：套餐详情页容器 -->
            <!-- 套餐详情页将动态加载 -->
        </div>
        <!-- 第308行：套餐详情页容器结束 -->
        
        <div id="myOrdersPage" class="meal-page-container">
            <!-- 第309行：我的订单页开始 -->
            <a href="#" class="back-btn" onclick="showPage('homePage')">
                <!-- 第310行：返回按钮 -->
                <i class="fas fa-arrow-left"></i>
                <!-- 第311行：返回箭头图标 -->
                返回套餐列表
                <!-- 第312行：按钮文字 -->
            </a>
            <!-- 第313行：返回按钮结束 -->
            
            <div class="my-orders-section">
                <!-- 第314行：我的订单区域开始 -->
                <h2 class="section-title">
                    <!-- 第315行：区域标题 -->
                    <i class="fas fa-clipboard-list"></i>
                    <!-- 第316行：订单列表图标 -->
                    我的订单
                    <!-- 第317行：标题文字 -->
                </h2>
                <!-- 第318行：区域标题结束 -->
                
                <div class="user-id-info">
                    <!-- 第319行：用户ID信息区域开始 -->
                    <div class="user-id-label">您的用户标识符：</div>
                    <!-- 第320行：用户ID标签 -->
                    <div class="user-id-value" id="currentUserIdDisplay"></div>
                    <!-- 第321行：用户ID显示区域 -->
                </div>
                <!-- 第322行：用户ID信息区域结束 -->
                
                <div class="orders-search">
                    <!-- 第323行：订单搜索区域开始 -->
                    <div class="search-box">
                        <!-- 第324行：搜索框容器开始 -->
                        <input type="text" class="search-input" id="orderSearchInput" placeholder="输入订单号搜索...">
                        <!-- 第325行：搜索输入框 -->
                        <button class="search-btn" id="orderSearchBtn">搜索</button>
                        <!-- 第326行：搜索按钮 -->
                    </div>
                    <!-- 第327行：搜索框容器结束 -->
                    
                    <div class="order-filter-tabs">
                        <!-- 第328行：订单筛选标签开始 -->
                        <button class="order-filter-tab active" data-order-filter="all">全部订单</button>
                        <!-- 第329行：全部订单标签 -->
                        <button class="order-filter-tab" data-order-filter="new">新订单</button>
                        <!-- 第330行：新订单标签 -->
                        <button class="order-filter-tab" data-order-filter="processing">处理中</button>
                        <!-- 第331行：处理中标签 -->
                        <button class="order-filter-tab" data-order-filter="completed">已完成</button>
                        <!-- 第332行：已完成标签 -->
                    </div>
                    <!-- 第333行：订单筛选标签结束 -->
                </div>
                <!-- 第334行：订单搜索区域结束 -->
                
                <div id="myOrdersContainer">
                    <!-- 第335行：我的订单容器开始 -->
                    <div class="loading-message" id="loadingOrders">
                        <!-- 第336行：加载提示开始 -->
                        <i class="fas fa-spinner fa-spin"></i> 
                        <!-- 第337行：加载图标 -->
                        正在加载订单...
                        <!-- 第338行：加载文字 -->
                    </div>
                    <!-- 第339行：加载提示结束 -->
                </div>
                <!-- 第340行：我的订单容器结束 -->
                
                <div class="no-user-orders" id="noUserOrdersMessage">
                    <!-- 第341行：无订单提示开始 -->
                    <i class="fas fa-box-open"></i>
                    <!-- 第342行：空箱子图标 -->
                    <h3>暂无订单</h3>
                    <!-- 第343行：提示标题 -->
                    <p>您还没有提交过订单，快去下单吧！</p>
                    <!-- 第344行：提示文字 -->
                </div>
                <!-- 第345行：无订单提示结束 -->
            </div>
            <!-- 第346行：我的订单区域结束 -->
        </div>
        <!-- 第347行：我的订单页结束 -->
        
        <div class="footer">
            <!-- 第348行：页脚开始 -->
            <p>© 2023 肯德基自助点餐系统 | 宅急送免配送费 | 商品特殊售出不退不换</p>
            <!-- 第349行：版权信息 -->
            <p>#春日出游必备 #吃鸡神器</p>
            <!-- 第350行：宣传标签 -->
        </div>
        <!-- 第351行：页脚结束 -->
    </div>
    <!-- 第352行：主要内容容器结束 -->
    
    <button class="admin-btn" id="adminBtn">
        <!-- 第353行：管理员按钮 -->
        <i class="fas fa-user-shield"></i>
        <!-- 第354行：管理员盾牌图标 -->
        <span>后台管理</span>
        <!-- 第355行：按钮文字 -->
        <div class="new-order-badge" id="newOrderBadge" style="display: none;">0</div>
        <!-- 第356行：新订单徽章 -->
    </button>
    <!-- 第357行：管理员按钮结束 -->
    
    <div class="password-modal" id="passwordModal">
        <!-- 第358行：密码模态框开始 -->
        <div class="password-box">
            <!-- 第359行：密码框容器开始 -->
            <h3><i class="fas fa-lock"></i> 管理员登录</h3>
            <!-- 第360行：密码框标题 -->
            <input type="password" class="password-input" id="adminPassword" placeholder="请输入管理员密码" maxlength="6">
            <!-- 第361行：密码输入框 -->
            <div class="password-error" id="passwordError">密码错误，请重新输入！</div>
            <!-- 第362行：密码错误提示 -->
            <button class="password-btn" id="submitPassword">确认</button>
            <!-- 第363行：确认按钮 -->
        </div>
        <!-- 第364行：密码框容器结束 -->
    </div>
    <!-- 第365行：密码模态框结束 -->
    
    <div class="panel-overlay" id="panelOverlay"></div>
    <!-- 第366行：面板遮罩层 -->
    
    <div class="admin-panel" id="adminPanel">
        <!-- 第367行：管理员面板开始 -->
        <div class="panel-header">
            <!-- 第368行：面板头部开始 -->
            <h2><i class="fas fa-clipboard-list"></i> 系统管理后台</h2>
            <!-- 第369行：面板标题 -->
            <button class="close-panel" id="closePanel">
                <!-- 第370行：关闭面板按钮 -->
                <i class="fas fa-times"></i>
                <!-- 第371行：关闭图标 -->
            </button>
            <!-- 第372行：关闭面板按钮结束 -->
        </div>
        <!-- 第373行：面板头部结束 -->
        
        <div class="panel-content">
            <!-- 第374行：面板内容开始 -->
            <div class="admin-tabs">
                <!-- 第375行：管理员标签页开始 -->
                <button class="admin-tab active" data-tab="orders">订单管理</button>
                <!-- 第376行：订单管理标签 -->
                <button class="admin-tab" data-tab="meals">套餐管理</button>
                <!-- 第377行：套餐管理标签 -->
                <button class="admin-tab" data-tab="addMeal">添加套餐</button>
                <!-- 第378行：添加套餐标签 -->
            </div>
            <!-- 第379行：管理员标签页结束 -->
            
            <div id="ordersTab" class="admin-tab-content active">
                <!-- 第380行：订单管理标签内容开始 -->
                <div class="order-filters">
                    <!-- 第381行：订单筛选器开始 -->
                    <button class="filter-btn active" data-filter="all">全部订单</button>
                    <!-- 第382行：全部订单筛选按钮 -->
                    <button class="filter-btn" data-filter="new">新订单</button>
                    <!-- 第383行：新订单筛选按钮 -->
                    <button class="filter-btn" data-filter="processing">处理中</button>
                    <!-- 第384行：处理中筛选按钮 -->
                    <button class="filter-btn" data-filter="completed">已完成</button>
                    <!-- 第385行：已完成筛选按钮 -->
                    <button class="filter-btn" id="clearAllOrders">清空所有订单</button>
                    <!-- 第386行：清空订单按钮 -->
                </div>
                <!-- 第387行：订单筛选器结束 -->
                
                <div class="orders-container" id="ordersContainer">
                    <!-- 第388行：订单容器开始 -->
                    <div class="loading-message" id="loadingAdminOrders">
                        <!-- 第389行：加载提示开始 -->
                        <i class="fas fa-spinner fa-spin"></i> 
                        <!-- 第390行：加载图标 -->
                        正在加载订单...
                        <!-- 第391行：加载文字 -->
                    </div>
                    <!-- 第392行：加载提示结束 -->
                    <div class="no-orders" id="noOrdersMessage">
                        <!-- 第393行：无订单提示开始 -->
                        <i class="fas fa-box-open"></i>
                        <!-- 第394行：空箱子图标 -->
                        <h3>暂无订单</h3>
                        <!-- 第395行：提示标题 -->
                        <p>当顾客提交订单后，订单将显示在这里</p>
                        <!-- 第396行：提示文字 -->
                    </div>
                    <!-- 第397行：无订单提示结束 -->
                </div>
                <!-- 第398行：订单容器结束 -->
            </div>
            <!-- 第399行：订单管理标签内容结束 -->
            
            <div id="mealsTab" class="admin-tab-content">
                <!-- 第400行：套餐管理标签内容开始 -->
                <div class="meal-filters">
                    <!-- 第401行：套餐筛选器开始 -->
                    <button class="meal-filter-btn active" data-meal-filter="all">全部套餐</button>
                    <!-- 第402行：全部套餐筛选按钮 -->
                    <button class="meal-filter-btn" data-meal-filter="active">已上架</button>
                    <!-- 第403行：已上架筛选按钮 -->
                    <button class="meal-filter-btn" data-meal-filter="inactive">已下架</button>
                    <!-- 第404行：已下架筛选按钮 -->
                </div>
                <!-- 第405行：套餐筛选器结束 -->
                
                <div class="meal-list" id="mealList">
                    <!-- 第406行：套餐列表容器开始 -->
                    <div class="loading-message" id="loadingAdminMeals">
                        <!-- 第407行：加载提示开始 -->
                        <i class="fas fa-spinner fa-spin"></i> 
                        <!-- 第408行：加载图标 -->
                        正在加载套餐...
                        <!-- 第409行：加载文字 -->
                    </div>
                    <!-- 第410行：加载提示结束 -->
                </div>
                <!-- 第411行：套餐列表容器结束 -->
                <div class="no-meals-message" id="noMealsAdminMessage">
                    <!-- 第412行：无套餐提示开始 -->
                    <i class="fas fa-utensils"></i>
                    <!-- 第413行：餐具图标 -->
                    <h3>暂无套餐</h3>
                    <!-- 第414行：提示标题 -->
                    <p>点击"添加套餐"标签创建新套餐</p>
                    <!-- 第415行：提示文字 -->
                </div>
                <!-- 第416行：无套餐提示结束 -->
            </div>
            <!-- 第417行：套餐管理标签内容结束 -->
            
            <div id="addMealTab" class="admin-tab-content">
                <!-- 第418行：添加套餐标签内容开始 -->
                <h3 class="section-title" id="addMealTitle">
                    <!-- 第419行：添加套餐标题 -->
                    <i class="fas fa-plus-circle"></i>
                    <!-- 第420行：加号图标 -->
                    添加新套餐
                    <!-- 第421行：标题文字 -->
                </h3>
                <!-- 第422行：添加套餐标题结束 -->
                
                <div class="meal-form">
                    <!-- 第423行：套餐表单开始 -->
                    <input type="hidden" id="currentMealId" value="">
                    <!-- 第424行：当前套餐ID隐藏字段 -->
                    
                    <div class="form-row">
                        <!-- 第425行：表单第一行开始 -->
                        <div class="form-group">
                            <!-- 第426行：表单组1开始 -->
                            <label class="form-label">套餐名称 <span class="required">*</span></label>
                            <!-- 第427行：套餐名称标签 -->
                            <input type="text" class="form-input" id="mealName" placeholder="例如：【12-8】自提/宅急送12件套89.9元" required>
                            <!-- 第428行：套餐名称输入框 -->
                        </div>
                        <!-- 第429行：表单组1结束 -->
                        
                        <div class="form-group">
                            <!-- 第430行：表单组2开始 -->
                            <label class="form-label">套餐价格 <span class="required">*</span></label>
                            <!-- 第431行：套餐价格标签 -->
                            <input type="number" class="form-input" id="mealPrice" placeholder="例如：89.9" min="0" step="0.01" required>
                            <!-- 第432行：套餐价格输入框 -->
                        </div>
                        <!-- 第433行：表单组2结束 -->
                    </div>
                    <!-- 第434行：表单第一行结束 -->
                    
                    <div class="form-row">
                        <!-- 第435行：表单第二行开始 -->
                        <div class="form-group">
                            <!-- 第436行：表单组3开始 -->
                            <label class="form-label">套餐标签 <span class="required">*</span></label>
                            <!-- 第437行：套餐标签标签 -->
                            <input type="text" class="form-input" id="mealTags" placeholder="用逗号分隔，例如：自提/宅急送,3人餐,12件套" required>
                            <!-- 第438行：套餐标签输入框 -->
                            <div class="form-hint">
                                <!-- 第439行：表单提示开始 -->
                                <i class="fas fa-lightbulb"></i> 
                                <!-- 第440行：灯泡图标 -->
                                标签将显示在套餐卡片上，用逗号分隔多个标签
                                <!-- 第441行：提示文字 -->
                            </div>
                            <!-- 第442行：表单提示结束 -->
                        </div>
                        <!-- 第443行：表单组3结束 -->
                        
                        <div class="form-group">
                            <!-- 第444行：表单组4开始 -->
                            <label class="form-label">套餐描述 <span class="required">*</span></label>
                            <!-- 第445行：套餐描述标签 -->
                            <input type="text" class="form-input" id="mealDescription" placeholder="例如：适合3人享用，自提/宅急送都可用" required>
                            <!-- 第446行：套餐描述输入框 -->
                        </div>
                        <!-- 第447行：表单组4结束 -->
                    </div>
                    <!-- 第448行：表单第二行结束 -->
                    
                    <div class="form-row">
                        <!-- 第449行：表单第三行开始 -->
                        <div class="form-group">
                            <!-- 第450行：表单组5开始 -->
                            <label class="form-label">套餐状态</label>
                            <!-- 第451行：套餐状态标签 -->
                            <div class="status-label">
                                <!-- 第452行：状态标签容器开始 -->
                                <label class="status-toggle">
                                    <!-- 第453行：状态切换开关标签 -->
                                    <input type="checkbox" id="mealActive" checked>
                                    <!-- 第454行：状态复选框 -->
                                    <span class="status-slider"></span>
                                    <!-- 第455行：状态滑块 -->
                                </label>
                                <!-- 第456行：状态切换开关标签结束 -->
                                <span id="statusText" class="status-active">上架</span>
                                <!-- 第457行：状态文字 -->
                            </div>
                            <!-- 第458行：状态标签容器结束 -->
                            <div class="form-hint">
                                <!-- 第459行：表单提示开始 -->
                                <i class="fas fa-lightbulb"></i> 
                                <!-- 第460行：灯泡图标 -->
                                上架的套餐会在用户端显示，下架的套餐不会显示
                                <!-- 第461行：提示文字 -->
                            </div>
                            <!-- 第462行：表单提示结束 -->
                        </div>
                        <!-- 第463行：表单组5结束 -->
                    </div>
                    <!-- 第464行：表单第三行结束 -->
                    
                    <h4 class="section-title" style="margin-top: 30px; font-size: 1.4rem;">
                        <!-- 第465行：选项组管理标题 -->
                        <i class="fas fa-list"></i>
                        <!-- 第466行：列表图标 -->
                        选项组管理
                        <!-- 第467行：标题文字 -->
                    </h4>
                    <!-- 第468行：选项组管理标题结束 -->
                    
                    <div class="option-groups-management" id="optionGroupsManagement">
                        <!-- 第469行：选项组管理容器 -->
                        <!-- 选项组将动态添加 -->
                    </div>
                    <!-- 第470行：选项组管理容器结束 -->
                    
                    <button class="add-btn action-btn" id="addOptionGroupBtn">
                        <!-- 第471行：添加选项组按钮 -->
                        <i class="fas fa-plus"></i> 
                        <!-- 第472行：加号图标 -->
                        添加选项组
                        <!-- 第473行：按钮文字 -->
                    </button>
                    <!-- 第474行：添加选项组按钮结束 -->
                    
                    <h4 class="section-title" style="margin-top: 30px; font-size: 1.4rem;">
                        <!-- 第475行：固定搭配管理标题 -->
                        <i class="fas fa-th-list"></i>
                        <!-- 第476行：列表图标 -->
                        固定搭配管理（可选）
                        <!-- 第477行：标题文字 -->
                    </h4>
                    <!-- 第478行：固定搭配管理标题结束 -->
                    
                    <div class="fixed-items-management" id="fixedItemsManagement">
                        <!-- 第479行：固定搭配管理容器 -->
                        <!-- 固定搭配项将动态添加 -->
                    </div>
                    <!-- 第480行：固定搭配管理容器结束 -->
                    
                    <button class="add-btn action-btn" id="addFixedItemBtn">
                        <!-- 第481行：添加固定搭配项按钮 -->
                        <i class="fas fa-plus"></i> 
                        <!-- 第482行：加号图标 -->
                        添加固定搭配项
                        <!-- 第483行：按钮文字 -->
                    </button>
                    <!-- 第484行：添加固定搭配项按钮结束 -->
                    
                    <div style="margin-top: 30px; display: flex; gap: 15px;">
                        <!-- 第485行：保存取消按钮容器开始 -->
                        <button class="add-btn action-btn" id="saveMealBtn" style="padding: 12px 30px;">
                            <!-- 第486行：保存套餐按钮 -->
                            <i class="fas fa-save"></i> 
                            <!-- 第487行：保存图标 -->
                            保存套餐
                            <!-- 第488行：按钮文字 -->
                        </button>
                        <!-- 第489行：保存套餐按钮结束 -->
                        <button class="filter-btn" id="cancelEditBtn" style="padding: 12px 30px; display: none;">
                            <!-- 第490行：取消编辑按钮 -->
                            <i class="fas fa-times"></i> 
                            <!-- 第491行：关闭图标 -->
                            取消编辑
                            <!-- 第492行：按钮文字 -->
                        </button>
                        <!-- 第493行：取消编辑按钮结束 -->
                    </div>
                    <!-- 第494行：保存取消按钮容器结束 -->
                </div>
                <!-- 第495行：套餐表单结束 -->
            </div>
            <!-- 第496行：添加套餐标签内容结束 -->
        </div>
        <!-- 第497行：面板内容结束 -->
    </div>
    <!-- 第498行：管理员面板结束 -->
    
    <div class="image-modal" id="imageModal">
        <!-- 第499行：图片模态框开始 -->
        <button class="close-modal" id="closeModal">
            <!-- 第500行：关闭模态框按钮 -->
            <i class="fas fa-times"></i>
            <!-- 第501行：关闭图标 -->
        </button>
        <!-- 第502行：关闭模态框按钮结束 -->
        <img class="modal-image" id="modalImage" src="" alt="预览图片">
        <!-- 第503行：模态框图片 -->
    </div>
    <!-- 第504行：图片模态框结束 -->
	    <script>
	        // 第505行：JavaScript代码开始
	        // 第506行：LeanCloud配置 - 请替换为您的实际配置
	        const LEANCLOUD_CONFIG = {
	            appId: "O7ZlYWWPH4VR5qNRR5ca1cNr-gzGzoHsz",           // 第507行：替换为您的App ID
	            appKey: "1IWefE69Z5Ppxe6wSK5iBlLL",         // 第508行：替换为您的App Key
	            serverURLs: "https://o7zlywwp.lc-cn-n1-shared.com"   // 第509行：替换为您的服务器地址
	        };
	        
	        // 第510行：全局变量定义
	        let meals = [];           // 第511行：套餐数据数组
	        let cart = [];            // 第512行：购物车数组
	        let orders = [];          // 第513行：订单数据数组
	        let newOrdersCount = 0;   // 第514行：新订单数量
	        const ADMIN_PASSWORD = "200104";  // 第515行：管理员密码
	        
	        // 第516行：用户标识符
	        let currentUserId = localStorage.getItem('kfcUserId');
	        
	        // 第517行：页面加载完成后执行
	        document.addEventListener('DOMContentLoaded', function() {
	            // 第518行：DOM内容加载完成事件监听器开始
	            console.log("页面加载完成，开始初始化...");  // 第519行：日志输出
	            
	            // 第520行：初始化LeanCloud
	            try {
	                // 第521行：尝试初始化LeanCloud
	                AV.init(LEANCLOUD_CONFIG);  // 第522行：初始化AV对象
	                console.log("LeanCloud初始化成功");  // 第523行：成功日志
	            } catch (error) {
	                // 第524行：捕获初始化错误
	                console.error("LeanCloud初始化失败:", error);  // 第525行：错误日志
	                showNotification("云端服务初始化失败，使用本地模式", "error");  // 第526行：显示通知
	            }
	            
	            // 第527行：生成或获取用户ID
	            if (!currentUserId) {
	                // 第528行：如果没有用户ID，生成一个新的
	                currentUserId = 'user_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9);
	                localStorage.setItem('kfcUserId', currentUserId);  // 第529行：保存到本地存储
	                console.log("新用户ID已生成:", currentUserId);  // 第530行：日志输出
	            }
	            
	            // 第531行：显示用户ID
	            document.getElementById('currentUserIdDisplay').textContent = currentUserId.substring(0, 12) + '...';
	            
	            // 第532行：初始化所有组件
	            initHomePage();  // 第533行：初始化首页
	            initAdminPanel();  // 第534行：初始化管理员面板
	            initMealManagement();  // 第535行：初始化套餐管理
	            initCart();  // 第536行：初始化购物车
	            updateOrderBadge();  // 第537行：更新订单徽章
	            initImagePreview();  // 第538行：初始化图片预览
	            initPasswordVerification();  // 第539行：初始化密码验证
	            initStatusToggle();  // 第540行：初始化状态切换
	            initMyOrdersPage();  // 第541行：初始化我的订单页面
	            initHeaderButtons();  // 第542行：初始化头部按钮
	            
	            // 第543行：从LeanCloud加载数据
	            loadAllDataFromCloud();  // 第544行：加载所有云端数据
	            
	            // 第545行：检查URL参数
	            checkUrlParams();  // 第546行：检查URL参数
	            
	            console.log("初始化完成");  // 第547行：完成日志
	        });  // 第548行：DOM内容加载完成事件监听器结束
	        
	        // 第549行：从LeanCloud加载所有数据
	        async function loadAllDataFromCloud() {
	            // 第550行：异步函数定义开始
	            console.log("开始从LeanCloud加载所有数据...");  // 第551行：日志输出
	            
	            try {
	                // 第552行：尝试加载数据
	                // 第553行：并行加载套餐和订单数据
	                await Promise.all([
	                    loadMealsFromCloud(),  // 第554行：加载套餐数据
	                    loadOrdersFromCloud()  // 第555行：加载订单数据
	                ]);
	                
	                console.log("所有数据加载完成");  // 第556行：成功日志
	                updateHomePage();  // 第557行：更新首页显示
	                updateOrderBadge();  // 第558行：更新订单徽章
	            } catch (error) {
	                // 第559行：捕获加载错误
	                console.error("加载数据失败:", error);  // 第560行：错误日志
	                showNotification("加载数据失败，使用本地缓存", "error");  // 第561行：显示通知
	            }
	        }  // 第562行：异步函数定义结束
	        
	        // 第563行：从LeanCloud加载套餐数据
	        async function loadMealsFromCloud() {
	            // 第564行：异步函数定义开始
	            try {
	                // 第565行：尝试加载套餐数据
	                console.log("开始从LeanCloud加载套餐数据...");  // 第566行：日志输出
	                
	                // 第567行：创建套餐查询
	                const Meal = AV.Object.extend('Meal');  // 第568行：创建Meal对象类
	                const query = new AV.Query('Meal');  // 第569行：创建查询
	                query.descending('createdAt');  // 第570行：按创建时间降序排列
	                
	                // 第571行：执行查询
	                const results = await query.find();  // 第572行：等待查询结果
	                console.log(`从LeanCloud加载到 ${results.length} 个套餐`);  // 第573行：日志输出
	                
	                // 第574行：将查询结果转换为普通对象数组
	                meals = results.map(mealObj => {
	                    const meal = mealObj.toJSON();  // 第575行：转换为JSON对象
	                    meal.objectId = mealObj.id;  // 第576行：保存LeanCloud的对象ID
	                    return meal;  // 第577行：返回套餐对象
	                });
	                
	                // 第578行：保存到本地存储作为缓存
	                localStorage.setItem('kfcMeals', JSON.stringify(meals));  // 第579行：保存到本地存储
	                
	                console.log("套餐数据加载完成");  // 第580行：成功日志
	                return meals;  // 第581行：返回套餐数组
	            } catch (error) {
	                // 第582行：捕获加载错误
	                console.error("从LeanCloud加载套餐数据失败:", error);  // 第583行：错误日志
	                
	                // 第584行：如果网络失败，尝试从本地存储加载
	                console.log("尝试从本地存储加载缓存数据...");  // 第585行：日志输出
	                const localMeals = JSON.parse(localStorage.getItem('kfcMeals')) || [];  // 第586行：从本地存储加载
	                meals = localMeals;  // 第587行：赋值给全局变量
	                return meals;  // 第588行：返回套餐数组
	            }
	        }  // 第589行：异步函数定义结束
	        
	        // 第590行：从LeanCloud加载订单数据
	        async function loadOrdersFromCloud() {
	            // 第591行：异步函数定义开始
	            try {
	                // 第592行：尝试加载订单数据
	                console.log("开始从LeanCloud加载订单数据...");  // 第593行：日志输出
	                
	                // 第594行：创建订单查询
	                const Order = AV.Object.extend('Order');  // 第595行：创建Order对象类
	                const query = new AV.Query('Order');  // 第596行：创建查询
	                query.descending('createdAt');  // 第597行：按创建时间降序排列
	                
	                // 第598行：执行查询
	                const results = await query.find();  // 第599行：等待查询结果
	                console.log(`从LeanCloud加载到 ${results.length} 个订单`);  // 第600行：日志输出
	                
	                // 第601行：将查询结果转换为普通对象数组
	                orders = results.map(orderObj => {
	                    const order = orderObj.toJSON();  // 第602行：转换为JSON对象
	                    order.objectId = orderObj.id;  // 第603行：保存LeanCloud的对象ID
	                    return order;  // 第604行：返回订单对象
	                });
	                
	                // 第605行：计算新订单数量
	                newOrdersCount = orders.filter(order => order.status === 'new').length;  // 第606行：过滤新订单
	                
	                // 第607行：保存到本地存储作为缓存
	                localStorage.setItem('kfcOrders', JSON.stringify(orders));  // 第608行：保存订单数据
	                localStorage.setItem('newOrdersCount', newOrdersCount);  // 第609行：保存新订单数量
	                
	                console.log("订单数据加载完成");  // 第610行：成功日志
	                return orders;  // 第611行：返回订单数组
	            } catch (error) {
	                // 第612行：捕获加载错误
	                console.error("从LeanCloud加载订单数据失败:", error);  // 第613行：错误日志
	                
	                // 第614行：如果网络失败，尝试从本地存储加载
	                console.log("尝试从本地存储加载缓存数据...");  // 第615行：日志输出
	                orders = JSON.parse(localStorage.getItem('kfcOrders')) || [];  // 第616行：从本地存储加载订单
	                newOrdersCount = JSON.parse(localStorage.getItem('newOrdersCount')) || 0;  // 第617行：从本地存储加载新订单数量
	                return orders;  // 第618行：返回订单数组
	            }
	        }  // 第619行：异步函数定义结束
	        
	        // 第620行：保存套餐到LeanCloud
	        async function saveMealToCloud(mealData) {
	            // 第621行：异步函数定义开始
	            try {
	                // 第622行：尝试保存套餐
	                let mealObject;  // 第623行：声明套餐对象变量
	                
	                if (mealData.objectId) {
	                    // 第624行：如果是更新现有套餐
	                    console.log("更新套餐到LeanCloud:", mealData.name);  // 第625行：日志输出
	                    mealObject = AV.Object.createWithoutData('Meal', mealData.objectId);  // 第626行：根据ID创建对象
	                    
	                    // 第627行：设置更新字段
	                    Object.keys(mealData).forEach(key => {
	                        // 第628行：遍历套餐数据的所有键
	                        if (key !== 'objectId' && key !== 'createdAt' && key !== 'updatedAt') {
	                            // 第629行：排除不需要更新的字段
	                            mealObject.set(key, mealData[key]);  // 第630行：设置字段值
	                        }
	                    });
	                    
	                    await mealObject.save();  // 第631行：保存对象
	                    console.log("套餐更新成功:", mealData.name);  // 第632行：成功日志
	                } else {
	                    // 第633行：如果是创建新套餐
	                    console.log("保存新套餐到LeanCloud:", mealData.name);  // 第634行：日志输出
	                    mealObject = new (AV.Object.extend('Meal'))();  // 第635行：创建新的Meal对象
	                    
	                    // 第636行：设置所有字段
	                    Object.keys(mealData).forEach(key => {
	                        // 第637行：遍历套餐数据的所有键
	                        if (key !== 'objectId') {
	                            // 第638行：排除objectId字段
	                            mealObject.set(key, mealData[key]);  // 第639行：设置字段值
	                        }
	                    });
	                    
	                    await mealObject.save();  // 第640行：保存对象
	                    mealData.objectId = mealObject.id;  // 第641行：获取新创建的对象ID
	                    console.log("套餐保存成功，ID:", mealObject.id);  // 第642行：成功日志
	                }
	                
	                // 第643行：同时更新本地存储
	                const localMeals = JSON.parse(localStorage.getItem('kfcMeals')) || [];  // 第644行：从本地存储加载套餐
	                const existingIndex = localMeals.findIndex(m => m.objectId === mealData.objectId);  // 第645行：查找现有套餐索引
	                
	                if (existingIndex >= 0) {
	                    // 第646行：如果已存在，更新它
	                    localMeals[existingIndex] = mealData;  // 第647行：更新套餐数据
	                } else {
	                    // 第648行：如果不存在，添加它
	                    localMeals.push(mealData);  // 第649行：添加新套餐
	                }
	                
	                localStorage.setItem('kfcMeals', JSON.stringify(localMeals));  // 第650行：保存到本地存储
	                
	                return mealData;  // 第651行：返回套餐数据
	            } catch (error) {
	                // 第652行：捕获保存错误
	                console.error("保存套餐到LeanCloud失败:", error);  // 第653行：错误日志
	                throw error;  // 第654行：重新抛出错误
	            }
	        }  // 第655行：异步函数定义结束
	        
	        // 第656行：删除套餐从LeanCloud
	        async function deleteMealFromCloud(mealId) {
	            // 第657行：异步函数定义开始
	            try {
	                // 第658行：尝试删除套餐
	                console.log("从LeanCloud删除套餐:", mealId);  // 第659行：日志输出
	                
	                const mealObject = AV.Object.createWithoutData('Meal', mealId);  // 第660行：根据ID创建对象
	                await mealObject.destroy();  // 第661行：删除对象
	                
	                console.log("套餐删除成功");  // 第662行：成功日志
	                return true;  // 第663行：返回成功
	            } catch (error) {
	                // 第664行：捕获删除错误
	                console.error("从LeanCloud删除套餐失败:", error);  // 第665行：错误日志
	                throw error;  // 第666行：重新抛出错误
	            }
	        }  // 第667行：异步函数定义结束
	        
	        // 第668行：保存订单到LeanCloud
	        async function saveOrderToCloud(orderData) {
	            // 第669行：异步函数定义开始
	            try {
	                // 第670行：尝试保存订单
	                console.log("保存订单到LeanCloud:", orderData.id);  // 第671行：日志输出
	                
	                const orderObject = new (AV.Object.extend('Order'))();  // 第672行：创建新的Order对象
	                
	                // 第673行：设置所有字段
	                Object.keys(orderData).forEach(key => {
	                    // 第674行：遍历订单数据的所有键
	                    orderObject.set(key, orderData[key]);  // 第675行：设置字段值
	                });
	                
	                await orderObject.save();  // 第676行：保存对象
	                orderData.objectId = orderObject.id;  // 第677行：获取新创建的对象ID
	                console.log("订单保存成功，ID:", orderObject.id);  // 第678行：成功日志
	                
	                // 第679行：更新本地存储
	                const localOrders = JSON.parse(localStorage.getItem('kfcOrders')) || [];  // 第680行：从本地存储加载订单
	                localOrders.unshift(orderData);  // 第681行：将新订单添加到数组开头
	                localStorage.setItem('kfcOrders', JSON.stringify(localOrders));  // 第682行：保存到本地存储
	                
	                // 第683行：更新新订单计数
	                newOrdersCount = localOrders.filter(order => order.status === 'new').length;  // 第684行：计算新订单数量
	                localStorage.setItem('newOrdersCount', newOrdersCount);  // 第685行：保存新订单数量
	                
	                return orderData;  // 第686行：返回订单数据
	            } catch (error) {
	                // 第687行：捕获保存错误
	                console.error("保存订单到LeanCloud失败:", error);  // 第688行：错误日志
	                throw error;  // 第689行：重新抛出错误
	            }
	        }  // 第690行：异步函数定义结束
	        
	        // 第691行：更新订单状态到LeanCloud
	        async function updateOrderStatusOnCloud(orderId, newStatus) {
	            // 第692行：异步函数定义开始
	            try {
	                // 第693行：尝试更新订单状态
	                console.log("更新订单状态:", orderId, "->", newStatus);  // 第694行：日志输出
	                
	                const orderObject = AV.Object.createWithoutData('Order', orderId);  // 第695行：根据ID创建对象
	                orderObject.set('status', newStatus);  // 第696行：设置新状态
	                orderObject.set('updatedAt', new Date());  // 第697行：设置更新时间
	                
	                await orderObject.save();  // 第698行：保存对象
	                console.log("订单状态更新成功");  // 第699行：成功日志
	                
	                // 第700行：更新本地存储
	                const localOrders = JSON.parse(localStorage.getItem('kfcOrders')) || [];  // 第701行：从本地存储加载订单
	                const orderIndex = localOrders.findIndex(order => order.objectId === orderId);  // 第702行：查找订单索引
	                
	                if (orderIndex >= 0) {
	                    // 第703行：如果找到订单，更新状态
	                    localOrders[orderIndex].status = newStatus;  // 第704行：更新状态
	                    localStorage.setItem('kfcOrders', JSON.stringify(localOrders));  // 第705行：保存到本地存储
	                }
	                
	                return true;  // 第706行：返回成功
	            } catch (error) {
	                // 第707行：捕获更新错误
	                console.error("更新订单状态失败:", error);  // 第708行：错误日志
	                throw error;  // 第709行：重新抛出错误
	            }
	        }  // 第710行：异步函数定义结束
	        
	        // 第711行：删除订单从LeanCloud
	        async function deleteOrderFromCloud(orderId) {
	            // 第712行：异步函数定义开始
	            try {
	                // 第713行：尝试删除订单
	                console.log("从LeanCloud删除订单:", orderId);  // 第714行：日志输出
	                
	                const orderObject = AV.Object.createWithoutData('Order', orderId);  // 第715行：根据ID创建对象
	                await orderObject.destroy();  // 第716行：删除对象
	                
	                console.log("订单删除成功");  // 第717行：成功日志
	                
	                // 第718行：更新本地存储
	                const localOrders = JSON.parse(localStorage.getItem('kfcOrders')) || [];  // 第719行：从本地存储加载订单
	                const updatedOrders = localOrders.filter(order => order.objectId !== orderId);  // 第720行：过滤掉已删除的订单
	                localStorage.setItem('kfcOrders', JSON.stringify(updatedOrders));  // 第721行：保存到本地存储
	                
	                return true;  // 第722行：返回成功
	            } catch (error) {
	                // 第723行：捕获删除错误
	                console.error("从LeanCloud删除订单失败:", error);  // 第724行：错误日志
	                throw error;  // 第725行：重新抛出错误
	            }
	        }  // 第726行：异步函数定义结束
	        
	        // 第727行：初始化首页
	        function initHomePage() {
	            // 第728行：函数定义开始
	            console.log("初始化首页");  // 第729行：日志输出
	            // 首页初始化逻辑将在数据加载后执行
	        }  // 第730行：函数定义结束
	        
	        // 第731行：更新首页显示
	        function updateHomePage() {
	            // 第732行：函数定义开始
	            const mealGrid = document.getElementById('mealGrid');  // 第733行：获取套餐网格容器
	            const noMealsMessage = document.getElementById('noMealsMessage');  // 第734行：获取无套餐提示
	            const loadingMeals = document.getElementById('loadingMeals');  // 第735行：获取加载提示
	            
	            // 第736行：隐藏加载提示
	            if (loadingMeals) {
	                // 第737行：如果加载提示存在
	                loadingMeals.style.display = 'none';  // 第738行：隐藏加载提示
	            }
	            
	            mealGrid.innerHTML = '';  // 第739行：清空套餐网格
	            
	            // 第740行：过滤出已上架的套餐
	            const activeMeals = meals.filter(meal => meal.active !== false);  // 第741行：过滤条件
	            
	            if (activeMeals.length === 0) {
	                // 第742行：如果没有上架的套餐
	                noMealsMessage.style.display = 'block';  // 第743行：显示无套餐提示
	                return;  // 第744行：返回
	            }
	            
	            noMealsMessage.style.display = 'none';  // 第745行：隐藏无套餐提示
	            
	            // 第746行：遍历所有上架的套餐
	            activeMeals.forEach(meal => {
	                // 第747行：遍历开始
	                const mealCard = document.createElement('a');  // 第748行：创建链接元素
	                mealCard.href = '#';  // 第749行：设置链接地址
	                mealCard.className = 'meal-card';  // 第750行：添加CSS类
	                
	                if (meal.active === false) {
	                    // 第751行：如果套餐已下架
	                    mealCard.classList.add('inactive');  // 第752行：添加下架样式类
	                }
	                
	                // 第753行：设置点击事件
	                mealCard.onclick = function(e) {
	                    // 第754行：点击事件处理函数开始
	                    e.preventDefault();  // 第755行：阻止默认行为
	                    if (meal.active === false) return;  // 第756行：如果已下架，直接返回
	                    showMealDetail(meal.objectId || meal.id);  // 第757行：显示套餐详情
	                };  // 第758行：点击事件处理函数结束
	                
	                // 第759行：设置套餐卡片HTML内容
	                mealCard.innerHTML = `
	                    <div class="meal-header">
	                        <h4 class="meal-name">${meal.name}</h4>
	                        <div class="meal-price">¥${meal.price}</div>
	                    </div>
	                    <div class="meal-description">
	                        ${Array.isArray(meal.tags) ? meal.tags.map(tag => `<span class="meal-tag">${tag}</span>`).join('') : ''}
	                        <p style="margin-top: 10px;">${meal.description}</p>
	                    </div>
	                `;
	                
	                mealGrid.appendChild(mealCard);  // 第760行：将套餐卡片添加到网格
	            });  // 第761行：遍历结束
	        }  // 第762行：函数定义结束
	        
	        // 第763行：显示套餐详情
	        function showMealDetail(mealId) {
	            // 第764行：函数定义开始
	            // 第765行：从内存中查找套餐
	            const meal = meals.find(m => (m.objectId === mealId) || (m.id === mealId));  // 第766行：查找套餐
	            if (!meal) return;  // 第767行：如果没找到套餐，返回
	            
	            // 第768行：获取套餐详情页容器
	            const mealDetailPage = document.getElementById('mealDetailPage');
	            
	            // 第769行：设置套餐详情页HTML内容
	            mealDetailPage.innerHTML = `
	                <a href="#" class="back-btn" onclick="showPage('homePage')">
	                    <i class="fas fa-arrow-left"></i>
	                    返回套餐列表
	                </a>
	                
	                <div class="main-content">
	                    <div class="menu-section">
	                        <h2 class="section-title">
	                            <i class="fas fa-hamburger"></i>
	                            ${meal.name}
	                        </h2>
	                        
	                        <div class="instructions">
	                            <p><strong>套餐详情：</strong></p>
	                            <ul>
	                                <li>${meal.description}</li>
	                                <li>请按照要求选择选项</li>
	                                <li>提交订单后可在右上角"查看我的订单"查看订单状态</li>
	                            </ul>
	                        </div>
	                        
	                        <div class="meal-options" id="mealOptions">
	                            ${generateOptionsHTML(meal)}
	                        </div>
	                        <button class="add-to-cart" data-meal-id="${meal.objectId || meal.id}" data-meal-name="${meal.name}" data-meal-price="${meal.price}" disabled>
	                            <i class="fas fa-cart-plus"></i>
	                            加入购物车
	                        </button>
	                    </div>
	                    
	                    <div class="cart-section">
	                        <h2 class="section-title">
	                            <i class="fas fa-shopping-cart"></i>
	                            购物车
	                        </h2>
	                        
	                        <div class="cart-items" id="cartItems">
	                            <div class="empty-cart-message">购物车是空的，请选择套餐</div>
	                        </div>
	                        
	                        <div class="cart-total">
	                            <span>总计：</span>
	                            <span class="total-price" id="totalPrice">¥0.00</span>
	                        </div>
	                        
	                        <button class="checkout-btn" id="checkoutBtn" disabled>
	                            <i class="fas fa-credit-card"></i>
	                            提交订单
	                        </button>
	                        
	                        <div class="delivery-form">
	                            <h3 class="section-title">
	                                <i class="fas fa-truck"></i>
	                                配送信息
	                            </h3>
	                            
	                            <div class="order-type">
	                                <label>
	                                    <input type="radio" name="deliveryType" value="delivery" checked>
	                                    <span>宅急送（免配送费）</span>
	                                </label>
	                                <label>
	                                    <input type="radio" name="deliveryType" value="pickup">
	                                    <span>到店自提</span>
	                                </label>
	                            </div>
	                            
	                            <div class="delivery-fields" id="deliveryFields">
	                                <div class="form-group">
	                                    <label class="form-label">收货人姓名 <span class="required">*</span></label>
	                                    <input type="text" class="form-input" id="customerName" placeholder="请输入姓名" required>
	                                </div>
	                                
	                                <div class="form-group">
	                                    <label class="form-label">联系电话 <span class="required">*</span></label>
	                                    <input type="tel" class="form-input" id="customerPhone" placeholder="请输入手机号码" required>
	                                </div>
	                                
	                                <div class="form-group">
	                                    <label class="form-label">配送地址 <span class="required">*</span></label>
	                                    <input type="text" class="form-input" id="deliveryAddress" placeholder="请输入详细地址" required>
	                                </div>
	                            </div>
	                            
	                            <div class="pickup-fields hidden" id="pickupFields">
	                                <div class="form-group">
	                                    <label class="form-label">门店信息提供方式 <span class="required">*</span></label>
	                                    <div class="info-method-selector">
	                                        <label class="method-option">
	                                            <input type="radio" name="pickupMethod" value="text" checked>
	                                            <span>手动填写</span>
	                                        </label>
	                                        <label class="method-option">
	                                            <input type="radio" name="pickupMethod" value="screenshot">
	                                            <span>上传截图</span>
	                                        </label>
	                                    </div>
	                                </div>
	                                
	                                <div class="text-method-fields" id="textMethodFields">
	                                    <div class="store-selection">
	                                        <div class="form-group">
	                                            <label class="form-label">自提城市 <span class="required">*</span></label>
	                                            <input type="text" class="form-input" id="pickupCityInput" placeholder="例如：北京市" required>
	                                        </div>
	                                        
	                                        <div class="form-group">
	                                            <label class="form-label">自提门店 <span class="required">*</span></label>
	                                            <input type="text" class="form-input" id="pickupStoreInput" placeholder="例如：肯德基王府井店" required>
	                                        </div>
	                                    </div>
	                                </div>
	                                
	                                <div class="screenshot-method-fields hidden" id="screenshotMethodFields">
	                                    <div class="form-group">
	                                        <label class="form-label">上传门店截图 <span class="required">*</span></label>
	                                        <div class="screenshot-upload-area" id="screenshotUploadArea">
	                                            <i class="fas fa-cloud-upload-alt"></i>
	                                            <p>点击或拖拽上传截图</p>
	                                            <p class="upload-hint">支持 JPG、PNG 格式，大小不超过 5MB</p>
	                                            <input type="file" id="storeScreenshot" accept="image/*" style="display: none;">
	                                        </div>
	                                        <div class="screenshot-preview hidden" id="screenshotPreview">
	                                            <img id="previewImage" src="" alt="截图预览">
	                                            <button type="button" class="remove-screenshot" id="removeScreenshot">
	                                                <i class="fas fa-times"></i>
	                                            </button>
	                                        </div>
	                                        <div class="form-hint">
	                                            <i class="fas fa-lightbulb"></i> 您可以截图包含门店地址的聊天记录、地图或订单页面
	                                        </div>
	                                    </div>
	                                </div>
	                            </div>
	                            
	                            <div class="form-group">
	                                <label class="form-label">订单备注</label>
	                                <textarea class="form-input" id="orderNote" rows="3" placeholder="如有特殊要求请在此备注（例如：不吃辣，多要番茄酱等）"></textarea>
	                            </div>
	                        </div>
	                    </div>
	                </div>
	            `;
	            
	            // 第770行：初始化套餐详情页的各个组件
	            initOptionSelection(mealDetailPage);  // 第771行：初始化选项选择
	            initDeliveryTypeToggle(mealDetailPage);  // 第772行：初始化配送类型切换
	            initPickupMethod(mealDetailPage);  // 第773行：初始化自提方式
	            initCart(mealDetailPage);  // 第774行：初始化购物车
	            initCheckout(mealDetailPage);  // 第775行：初始化结算
	            
	            // 第776行：如果没有选项组，直接启用加入购物车按钮
	            if (!meal.optionGroups || meal.optionGroups.length === 0) {
	                // 第777行：如果没有选项组
	                const addToCartBtn = mealDetailPage.querySelector('.add-to-cart');  // 第778行：获取加入购物车按钮
	                if (addToCartBtn) {
	                    // 第779行：如果按钮存在
	                    addToCartBtn.disabled = false;  // 第780行：启用按钮
	                    addToCartBtn.style.opacity = '1';  // 第781行：设置不透明度
	                    addToCartBtn.style.cursor = 'pointer';  // 第782行：设置鼠标指针
	                }
	            }
	            
	            showPage('mealDetailPage');  // 第783行：显示套餐详情页
	            
	            // 第784行：切换头部按钮显示
	            document.getElementById('viewOrdersBtn').style.display = 'none';  // 第785行：隐藏查看订单按钮
	            document.getElementById('viewHomeBtn').style.display = 'flex';  // 第786行：显示返回首页按钮
	        }  // 第787行：函数定义结束
	        
	        // 第788行：生成选项HTML
	        function generateOptionsHTML(meal) {
	            // 第789行：函数定义开始
	            let html = '';  // 第790行：初始化HTML字符串
	            
	            if (meal.optionGroups && meal.optionGroups.length > 0) {
	                // 第791行：如果有选项组
	                meal.optionGroups.forEach((group, groupIndex) => {
	                    // 第792行：遍历选项组
	                    const groupId = `group-${meal.objectId || meal.id}-${groupIndex}`;  // 第793行：生成组ID
	                    const repeat = group.repeat ? 'true' : 'false';  // 第794行：是否可重复选择
	                    const maxPerItem = group.maxPerItem || (group.repeat ? 999 : 1);  // 第795行：每个选项最大选择数量
	                    
	                    // 第796行：添加选项组HTML
	                    html += `
	                        <div class="option-group" data-group-id="${groupId}" data-min-select="${group.minSelect}" data-max-select="${group.maxSelect}" data-repeat="${repeat}" data-max-per-item="${maxPerItem}">
	                            <div class="option-title">${group.title}</div>
	                            <div class="option-rules">${group.rules}</div>
	                            <div class="option-items">
	                    `;
	                    
	                    if (group.items && group.items.length > 0) {
	                        // 第797行：如果有选项项
	                        group.items.forEach((item, itemIndex) => {
	                            // 第798行：遍历选项项
	                            const itemId = `${groupId}-${itemIndex}`;  // 第799行：生成选项项ID
	                            const addPrice = item.addPrice || 0;  // 第800行：附加价格
	                            const addPriceText = addPrice > 0 ? ` (+¥${addPrice})` : '';  // 第801行：附加价格文本
	                            
	                            // 第802行：添加选项项HTML
	                            html += `
	                                <div class="option-item" data-item-id="${itemId}" data-name="${item.name}" data-add-price="${addPrice}">
	                                    <span>${item.name}${addPriceText}</span>
	                                    <div class="selection-counter">
	                                        <button class="counter-btn decrement" disabled>-</button>
	                                        <span class="counter-value">0</span>
	                                        <button class="counter-btn increment">+</button>
	                                    </div>
	                                </div>
	                            `;
	                        });
	                    }
	                    
	                    // 第803行：关闭选项组HTML
	                    html += `
	                            </div>
	                            <div class="selection-status invalid">已选择 0 份，还需选择 ${group.minSelect} 份</div>
	                        </div>
	                    `;
	                });
	            }
	            
	            if (meal.fixedItems && meal.fixedItems.length > 0) {
	                // 第804行：如果有固定搭配
	                html += `
	                    <div class="fixed-combo-items">
	                        <div class="option-title">固定搭配：</div>
	                        <div class="option-rules">套餐包含固定搭配，无需选择</div>
	                        <div class="fixed-combo-list">
	                `;
	                
	                meal.fixedItems.forEach(item => {
	                    // 第805行：遍历固定搭配项
	                    html += `
	                        <div class="fixed-combo-item">
	                            <div class="fixed-combo-item-name">${item.name}</div>
	                            <div class="fixed-combo-item-qty">×${item.quantity}</div>
	                        </div>
	                    `;
	                });
	                
	                html += `
	                        </div>
	                    </div>
	                `;
	            }
	            
	            return html;  // 第806行：返回生成的HTML
	        }  // 第807行：函数定义结束
	        
	        // 第808行：显示指定页面
	        function showPage(pageId) {
	            // 第809行：函数定义开始
	            // 第810行：隐藏所有页面
	            document.querySelectorAll('.meal-page-container').forEach(page => {
	                // 第811行：遍历所有页面容器
	                page.classList.remove('active');  // 第812行：移除激活类
	            });
	            
	            // 第813行：显示指定页面
	            document.getElementById(pageId).classList.add('active');  // 第814行：添加激活类
	            
	            window.scrollTo(0, 0);  // 第815行：滚动到页面顶部
	            
	            if (pageId === 'homePage') {
	                // 第816行：如果是首页
	                document.getElementById('viewOrdersBtn').style.display = 'flex';  // 第817行：显示查看订单按钮
	                document.getElementById('viewHomeBtn').style.display = 'none';  // 第818行：隐藏返回首页按钮
	            }
	        }  // 第819行：函数定义结束
	        
	        // 第820行：初始化密码验证
	        function initPasswordVerification() {
	            // 第821行：函数定义开始
	            const passwordModal = document.getElementById('passwordModal');  // 第822行：获取密码模态框
	            const adminPasswordInput = document.getElementById('adminPassword');  // 第823行：获取密码输入框
	            const submitPasswordBtn = document.getElementById('submitPassword');  // 第824行：获取提交密码按钮
	            const passwordError = document.getElementById('passwordError');  // 第825行：获取密码错误提示
	            
	            submitPasswordBtn.addEventListener('click', function() {
	                // 第826行：添加提交密码按钮点击事件
	                const enteredPassword = adminPasswordInput.value.trim();  // 第827行：获取输入的密码
	                
	                if (enteredPassword === ADMIN_PASSWORD) {
	                    // 第828行：如果密码正确
	                    passwordModal.classList.remove('active');  // 第829行：隐藏密码模态框
	                    adminPasswordInput.value = '';  // 第830行：清空密码输入框
	                    passwordError.style.display = 'none';  // 第831行：隐藏错误提示
	                    
	                    openAdminPanel();  // 第832行：打开管理员面板
	                } else {
	                    // 第833行：如果密码错误
	                    passwordError.style.display = 'block';  // 第834行：显示错误提示
	                    adminPasswordInput.value = '';  // 第835行：清空密码输入框
	                    adminPasswordInput.focus();  // 第836行：聚焦到密码输入框
	                }
	            });
	            
	            adminPasswordInput.addEventListener('keypress', function(e) {
	                // 第837行：添加密码输入框按键事件
	                if (e.key === 'Enter') {
	                    // 第838行：如果按下回车键
	                    submitPasswordBtn.click();  // 第839行：触发提交按钮点击
	                }
	            });
	        }  // 第840行：函数定义结束
	        
	        // 第841行：打开管理员面板
	        function openAdminPanel() {
	            // 第842行：函数定义开始
	            const adminPanel = document.getElementById('adminPanel');  // 第843行：获取管理员面板
	            const panelOverlay = document.getElementById('panelOverlay');  // 第844行：获取面板遮罩层
	            
	            adminPanel.classList.add('active');  // 第845行：显示管理员面板
	            panelOverlay.classList.add('active');  // 第846行：显示遮罩层
	            document.body.style.overflow = 'hidden';  // 第847行：禁止页面滚动
	            
	            // 第848行：重置新订单计数
	            newOrdersCount = 0;  // 第849行：重置计数器
	            localStorage.setItem('newOrdersCount', newOrdersCount);  // 第850行：保存到本地存储
	            updateOrderBadge();  // 第851行：更新订单徽章
	            
	            renderOrders('all');  // 第852行：渲染所有订单
	            updateMealList('all');  // 第853行：更新套餐列表
	        }  // 第854行：函数定义结束
	        
	        // 第855行：初始化选项选择
	        function initOptionSelection(container) {
	            // 第856行：函数定义开始
	            container.querySelectorAll('.counter-btn.increment').forEach(button => {
	                // 第857行：遍历所有增加按钮
	                button.addEventListener('click', function(e) {
	                    // 第858行：添加点击事件
	                    e.stopPropagation();  // 第859行：阻止事件冒泡
	                    const optionItem = this.closest('.option-item');  // 第860行：获取选项项
	                    const counterValue = optionItem.querySelector('.counter-value');  // 第861行：获取计数器值元素
	                    const decrementBtn = optionItem.querySelector('.decrement');  // 第862行：获取减少按钮
	                    const group = optionItem.closest('.option-group');  // 第863行：获取选项组
	                    
	                    const maxSelect = parseInt(group.dataset.maxSelect) || Infinity;  // 第864行：获取最大选择数量
	                    const repeat = group.dataset.repeat === 'true';  // 第865行：是否可重复选择
	                    const maxPerItem = parseInt(group.dataset.maxPerItem) || (repeat ? Infinity : 1);  // 第866行：获取每个选项最大选择数量
	                    
	                    let totalSelected = 0;  // 第867行：初始化总选择数量
	                    group.querySelectorAll('.counter-value').forEach(value => {
	                        // 第868行：计算选项组中已选择的总数
	                        totalSelected += parseInt(value.textContent);  // 第869行：累加
	                    });
	                    
	                    let currentSelected = parseInt(counterValue.textContent);  // 第870行：获取当前选项已选择数量
	                    
	                    if (totalSelected >= maxSelect) {
	                        // 第871行：如果已超过最大选择数量
	                        showNotification(`该选项组最多只能选择${maxSelect}份`);  // 第872行：显示通知
	                        return;  // 第873行：返回
	                    }
	                    
	                    if (currentSelected >= maxPerItem) {
	                        // 第874行：如果已超过每个选项最大选择数量
	                        showNotification(`该选项最多只能选择${maxPerItem}份`);  // 第875行：显示通知
	                        return;  // 第876行：返回
	                    }
	                    
	                    currentSelected++;  // 第877行：增加选择数量
	                    counterValue.textContent = currentSelected;  // 第878行：更新计数器显示
	                    
	                    decrementBtn.disabled = false;  // 第879行：启用减少按钮
	                    optionItem.classList.add('selected');  // 第880行：添加选中样式
	                    
	                    updateGroupSelectionStatus(group);  // 第881行：更新选项组选择状态
	                });
	            });
	            
	            container.querySelectorAll('.counter-btn.decrement').forEach(button => {
	                // 第882行：遍历所有减少按钮
	                button.addEventListener('click', function(e) {
	                    // 第883行：添加点击事件
	                    e.stopPropagation();  // 第884行：阻止事件冒泡
	                    const optionItem = this.closest('.option-item');  // 第885行：获取选项项
	                    const counterValue = optionItem.querySelector('.counter-value');  // 第886行：获取计数器值元素
	                    
	                    let currentSelected = parseInt(counterValue.textContent);  // 第887行：获取当前选项已选择数量
	                    
	                    if (currentSelected > 0) {
	                        // 第888行：如果当前选择数量大于0
	                        currentSelected--;  // 第889行：减少选择数量
	                        counterValue.textContent = currentSelected;  // 第890行：更新计数器显示
	                        
	                        this.disabled = currentSelected === 0;  // 第891行：如果数量为0，禁用减少按钮
	                        
	                        if (currentSelected === 0) {
	                            // 第892行：如果选择数量为0
	                            optionItem.classList.remove('selected');  // 第893行：移除选中样式
	                        }
	                        
	                        const group = optionItem.closest('.option-group');  // 第894行：获取选项组
	                        updateGroupSelectionStatus(group);  // 第895行：更新选项组选择状态
	                    }
	                });
	            });
	            
	            container.querySelectorAll('.option-item').forEach(item => {
	                // 第896行：遍历所有选项项
	                if (!item.classList.contains('selected')) {
	                    // 第897行：如果选项项未被选中
	                    item.addEventListener('click', function() {
	                        // 第898行：添加点击事件
	                        const incrementBtn = this.querySelector('.increment');  // 第899行：获取增加按钮
	                        if (incrementBtn) {
	                            // 第900行：如果增加按钮存在
	                            incrementBtn.click();  // 第901行：触发增加按钮点击
	                        }
	                    });
	                }
	            });
	        }  // 第902行：函数定义结束
	        
	        // 第903行：更新选项组选择状态
	        function updateGroupSelectionStatus(group) {
	            // 第904行：函数定义开始
	            if (!group.dataset.minSelect) return;  // 第905行：如果没有最小选择数量，返回
	            
	            const minSelect = parseInt(group.dataset.minSelect);  // 第906行：获取最小选择数量
	            const maxSelect = parseInt(group.dataset.maxSelect);  // 第907行：获取最大选择数量
	            
	            let totalSelected = 0;  // 第908行：初始化总选择数量
	            group.querySelectorAll('.counter-value').forEach(value => {
	                // 第909行：计算选项组中已选择的总数
	                totalSelected += parseInt(value.textContent);  // 第910行：累加
	            });
	            
	            const statusElement = group.querySelector('.selection-status');  // 第911行：获取状态元素
	            if (statusElement) {
	                // 第912行：如果状态元素存在
	                if (totalSelected >= minSelect && totalSelected <= maxSelect) {
	                    // 第913行：如果选择数量在范围内
	                    statusElement.textContent = `已选择 ${totalSelected} 份，符合要求`;  // 第914行：设置有效状态文本
	                    statusElement.className = 'selection-status valid';  // 第915行：设置有效样式
	                } else if (totalSelected < minSelect) {
	                    // 第916行：如果选择数量不足
	                    statusElement.textContent = `已选择 ${totalSelected} 份，还需选择 ${minSelect - totalSelected} 份`;  // 第917行：设置不足状态文本
	                    statusElement.className = 'selection-status invalid';  // 第918行：设置无效样式
	                } else {
	                    // 第919行：如果选择数量超出
	                    statusElement.textContent = `已选择 ${totalSelected} 份，已超过最大 ${maxSelect} 份`;  // 第920行：设置超出状态文本
	                    statusElement.className = 'selection-status invalid';  // 第921行：设置无效样式
	                }
	            }
	            
	            const mealContainer = group.closest('.meal-page-container');  // 第922行：获取套餐页面容器
	            updateAddToCartButton(mealContainer);  // 第923行：更新加入购物车按钮状态
	        }  // 第924行：函数定义结束
	        
	        // 第925行：更新加入购物车按钮状态
	        function updateAddToCartButton(mealContainer) {
	            // 第926行：函数定义开始
	            const addToCartBtn = mealContainer.querySelector('.add-to-cart');  // 第927行：获取加入购物车按钮
	            if (!addToCartBtn) return;  // 第928行：如果按钮不存在，返回
	
	            const optionGroups = mealContainer.querySelectorAll('.option-group');  // 第929行：获取所有选项组
	            if (optionGroups.length === 0) {
	                // 第930行：如果没有选项组
	                addToCartBtn.disabled = false;  // 第931行：启用按钮
	                addToCartBtn.style.opacity = '1';  // 第932行：设置不透明度
	                addToCartBtn.style.cursor = 'pointer';  // 第933行：设置鼠标指针
	                return;  // 第934行：返回
	            }
	
	            let isValid = true;  // 第935行：初始化有效性标志
	            
	            optionGroups.forEach(group => {
	                // 第936行：遍历所有选项组
	                if (!group.dataset.minSelect) return;  // 第937行：如果没有最小选择数量，跳过
	                
	                const minSelect = parseInt(group.dataset.minSelect);  // 第938行：获取最小选择数量
	                const maxSelect = parseInt(group.dataset.maxSelect);  // 第939行：获取最大选择数量
	                
	                let totalSelected = 0;  // 第940行：初始化总选择数量
	                group.querySelectorAll('.counter-value').forEach(value => {
	                    // 第941行：计算选项组中已选择的总数
	                    totalSelected += parseInt(value.textContent);  // 第942行：累加
	                });
	                
	                if (totalSelected < minSelect || totalSelected > maxSelect) {
	                    // 第943行：如果选择数量不在范围内
	                    isValid = false;  // 第944行：设置为无效
	                }
	            });
	            
	            if (isValid) {
	                // 第945行：如果所有选项组都有效
	                addToCartBtn.disabled = false;  // 第946行：启用按钮
	                addToCartBtn.style.opacity = '1';  // 第947行：设置不透明度
	                addToCartBtn.style.cursor = 'pointer';  // 第948行：设置鼠标指针
	            } else {
	                // 第949行：如果有选项组无效
	                addToCartBtn.disabled = true;  // 第950行：禁用按钮
	                addToCartBtn.style.opacity = '0.6';  // 第951行：设置不透明度
	                addToCartBtn.style.cursor = 'not-allowed';  // 第952行：设置鼠标指针
	            }
	        }  // 第953行：函数定义结束
	        
	        // 第954行：初始化配送类型切换
	        function initDeliveryTypeToggle(container) {
	            // 第955行：函数定义开始
	            container.querySelectorAll('input[name="deliveryType"]').forEach(radio => {
	                // 第956行：遍历所有配送类型单选按钮
	                radio.addEventListener('change', function() {
	                    // 第957行：添加变化事件
	                    const deliveryFields = container.querySelector('.delivery-fields');  // 第958行：获取配送字段区域
	                    const pickupFields = container.querySelector('.pickup-fields');  // 第959行：获取自提字段区域
	                    
	                    if (this.value === 'delivery') {
	                        // 第960行：如果选择宅急送
	                        deliveryFields.classList.remove('hidden');  // 第961行：显示配送字段
	                        pickupFields.classList.add('hidden');  // 第962行：隐藏自提字段
	                    } else {
	                        // 第963行：如果选择到店自提
	                        pickupFields.classList.remove('hidden');  // 第964行：显示自提字段
	                        deliveryFields.classList.add('hidden');  // 第965行：隐藏配送字段
	                    }
	                });
	            });
	        }  // 第966行：函数定义结束
	        
	        // 第967行：初始化自提方式
	        function initPickupMethod(container) {
	            // 第968行：函数定义开始
	            container.querySelectorAll('input[name="pickupMethod"]').forEach(radio => {
	                // 第969行：遍历所有自提方式单选按钮
	                radio.addEventListener('change', function() {
	                    // 第970行：添加变化事件
	                    const textFields = container.querySelector('.text-method-fields');  // 第971行：获取文本方式字段
	                    const screenshotFields = container.querySelector('.screenshot-method-fields');  // 第972行：获取截图方式字段
	                    
	                    if (this.value === 'text') {
	                        // 第973行：如果选择手动填写
	                        textFields.classList.remove('hidden');  // 第974行：显示文本字段
	                        screenshotFields.classList.add('hidden');  // 第975行：隐藏截图字段
	                    } else {
	                        // 第976行：如果选择上传截图
	                        screenshotFields.classList.remove('hidden');  // 第977行：显示截图字段
	                        textFields.classList.add('hidden');  // 第978行：隐藏文本字段
	                    }
	                });
	            });
	            
	            const uploadArea = container.querySelector('.screenshot-upload-area');  // 第979行：获取截图上传区域
	            if (uploadArea) {
	                // 第980行：如果截图上传区域存在
	                const fileInput = uploadArea.querySelector('input[type="file"]');  // 第981行：获取文件输入框
	                const previewContainer = uploadArea.parentElement.querySelector('.screenshot-preview');  // 第982行：获取预览容器
	                const previewImage = previewContainer ? previewContainer.querySelector('img') : null;  // 第983行：获取预览图片
	                const removeBtn = previewContainer ? previewContainer.querySelector('.remove-screenshot') : null;  // 第984行：获取移除按钮
	                
	                if (uploadArea && fileInput && previewContainer && previewImage && removeBtn) {
	                    // 第985行：如果所有必需元素都存在
	                    uploadArea.addEventListener('click', function() {
	                        // 第986行：添加上传区域点击事件
	                        fileInput.click();  // 第987行：触发文件输入框点击
	                    });
	                    
	                    uploadArea.addEventListener('dragover', function(e) {
	                        // 第988行：添加上传区域拖拽悬停事件
	                        e.preventDefault();  // 第989行：阻止默认行为
	                        this.style.borderColor = '#e31837';  // 第990行：改变边框颜色
	                        this.style.backgroundColor = '#fff5f5';  // 第991行：改变背景颜色
	                    });
	                    
	                    uploadArea.addEventListener('dragleave', function(e) {
	                        // 第992行：添加上传区域拖拽离开事件
	                        e.preventDefault();  // 第993行：阻止默认行为
	                        this.style.borderColor = '#ddd';  // 第994行：恢复边框颜色
	                        this.style.backgroundColor = '#f9f9f9';  // 第995行：恢复背景颜色
	                    });
	                    
	                    uploadArea.addEventListener('drop', function(e) {
	                        // 第996行：添加上传区域拖拽放下事件
	                        e.preventDefault();  // 第997行：阻止默认行为
	                        this.style.borderColor = '#ddd';  // 第998行：恢复边框颜色
	                        this.style.backgroundColor = '#f9f9f9';  // 第999行：恢复背景颜色
	                        
	                        if (e.dataTransfer.files.length) {
	                            // 第1000行：如果有拖拽的文件
	                            handleFileSelect(e.dataTransfer.files[0], fileInput, previewContainer, previewImage, uploadArea);  // 第1001行：处理文件选择
	                        }
	                    });
	                    
	                    fileInput.addEventListener('change', function(e) {
	                        // 第1002行：添加文件输入框变化事件
	                        if (e.target.files.length) {
	                            // 第1003行：如果有选择的文件
	                            handleFileSelect(e.target.files[0], fileInput, previewContainer, previewImage, uploadArea);  // 第1004行：处理文件选择
	                        }
	                    });
	                    
	                    removeBtn.addEventListener('click', function() {
	                        // 第1005行：添加移除按钮点击事件
	                        fileInput.value = '';  // 第1006行：清空文件输入框
	                        previewContainer.classList.add('hidden');  // 第1007行：隐藏预览容器
	                        uploadArea.style.display = 'block';  // 第1008行：显示上传区域
	                    });
	                }
	            }
	            
	            function handleFileSelect(file, fileInput, previewContainer, previewImage, uploadArea) {
	                // 第1009行：处理文件选择的函数
	                if (!file.type.match('image.*')) {
	                    // 第1010行：如果不是图片文件
	                    showNotification('请选择图片文件', 'error');  // 第1011行：显示通知
	                    return;  // 第1012行：返回
	                }
	                
	                if (file.size > 5 * 1024 * 1024) {
	                    // 第1013行：如果文件大小超过5MB
	                    showNotification('图片大小不能超过5MB', 'error');  // 第1014行：显示通知
	                    return;  // 第1015行：返回
	                }
	                
	                const reader = new FileReader();  // 第1016行：创建文件阅读器
	                reader.onload = function(e) {
	                    // 第1017行：文件读取完成事件
	                    previewImage.src = e.target.result;  // 第1018行：设置预览图片源
	                    previewContainer.classList.remove('hidden');  // 第1019行：显示预览容器
	                    uploadArea.style.display = 'none';  // 第1020行：隐藏上传区域
	                };
	                reader.readAsDataURL(file);  // 第1021行：读取文件为DataURL
	            }
	        }  // 第1022行：函数定义结束
	        
	        // 第1023行：初始化购物车
	        function initCart(container) {
	            // 第1024行：函数定义开始
	            const addToCartBtn = container.querySelector('.add-to-cart');  // 第1025行：获取加入购物车按钮
	            if (addToCartBtn) {
	                // 第1026行：如果按钮存在
	                addToCartBtn.addEventListener('click', function() {
	                    // 第1027行：添加点击事件
	                    const optionGroups = container.querySelectorAll('.option-group');  // 第1028行：获取所有选项组
	                    
	                    if (this.disabled && optionGroups.length > 0) {
	                        // 第1029行：如果按钮被禁用且有选项组
	                        showNotification('请先完成选项选择，确保每个选项组的选择数量符合要求');  // 第1030行：显示通知
	                        return;  // 第1031行：返回
	                    }
	                    
	                    const mealId = this.dataset.mealId;  // 第1032行：获取套餐ID
	                    const mealName = this.dataset.mealName;  // 第1033行：获取套餐名称
	                    const mealPrice = parseFloat(this.dataset.mealPrice);  // 第1034行：获取套餐价格
	                    
	                    const meal = meals.find(m => (m.objectId === mealId) || (m.id === mealId));  // 第1035行：查找套餐
	                    if (!meal) return;  // 第1036行：如果没找到套餐，返回
	                    
	                    const selectedOptions = [];  // 第1037行：初始化已选选项数组
	                    let additionalPrice = 0;  // 第1038行：初始化附加价格
	                    
	                    container.querySelectorAll('.option-group').forEach(group => {
	                        // 第1039行：遍历所有选项组
	                        group.querySelectorAll('.option-item').forEach(item => {
	                            // 第1040行：遍历所有选项项
	                            const counterValue = item.querySelector('.counter-value');  // 第1041行：获取计数器值元素
	                            const count = parseInt(counterValue.textContent);  // 第1042行：获取选择数量
	                            
	                            if (count > 0) {
	                                // 第1043行：如果选择数量大于0
	                                const itemName = item.dataset.name || item.textContent;  // 第1044行：获取选项名称
	                                const itemAddPrice = parseFloat(item.dataset.addPrice) || 0;  // 第1045行：获取附加价格
	                                
	                                for (let i = 0; i < count; i++) {
	                                    // 第1046行：根据选择数量循环
	                                    selectedOptions.push(itemName);  // 第1047行：添加选项名称到数组
	                                    additionalPrice += itemAddPrice;  // 第1048行：累加附加价格
	                                }
	                            }
	                        });
	                    });
	                    
	                    if (meal.fixedItems && meal.fixedItems.length > 0) {
	                        // 第1049行：如果有固定搭配
	                        meal.fixedItems.forEach(item => {
	                            // 第1050行：遍历固定搭配项
	                            for (let i = 0; i < item.quantity; i++) {
	                                // 第1051行：根据数量循环
	                                selectedOptions.push(item.name);  // 第1052行：添加固定搭配项名称
	                            }
	                        });
	                    }
	                    
	                    if (selectedOptions.length === 0) {
	                        // 第1053行：如果没有选择任何选项
	                        showNotification('该套餐没有任何项目，无法加入购物车');  // 第1054行：显示通知
	                        return;  // 第1055行：返回
	                    }
	                    
	                    const totalPrice = mealPrice + additionalPrice;  // 第1056行：计算总价格
	                    
	                    const mealItem = {
	                        // 第1057行：创建购物车项对象
	                        id: mealId,
	                        name: mealName,
	                        basePrice: mealPrice,
	                        additionalPrice: additionalPrice,
	                        totalPrice: totalPrice,
	                        options: [...selectedOptions]  // 第1058行：复制已选选项数组
	                    };
	                    
	                    cart.push(mealItem);  // 第1059行：添加到购物车
	                    
	                    updateCartDisplay();  // 第1060行：更新购物车显示
	                    
	                    showNotification(`已添加 "${mealName}" 到购物车`, 'success');  // 第1061行：显示成功通知
	                    
	                    resetOptions(container);  // 第1062行：重置选项选择
	                });
	            }
	        }  // 第1063行：函数定义结束
	        
	        // 第1064行：重置选项选择
	        function resetOptions(container) {
	            // 第1065行：函数定义开始
	            container.querySelectorAll('.option-group').forEach(group => {
	                // 第1066行：遍历所有选项组
	                group.querySelectorAll('.option-item').forEach(item => {
	                    // 第1067行：遍历所有选项项
	                    const counterValue = item.querySelector('.counter-value');  // 第1068行：获取计数器值元素
	                    const decrementBtn = item.querySelector('.decrement');  // 第1069行：获取减少按钮
	                    
	                    counterValue.textContent = '0';  // 第1070行：重置计数器值
	                    if (decrementBtn) {
	                        // 第1071行：如果减少按钮存在
	                        decrementBtn.disabled = true;  // 第1072行：禁用减少按钮
	                    }
	                    item.classList.remove('selected');  // 第1073行：移除选中样式
	                });
	                
	                updateGroupSelectionStatus(group);  // 第1074行：更新选项组选择状态
	            });
	        }  // 第1075行：函数定义结束
	        
	        // 第1076行：更新购物车显示
	        function updateCartDisplay() {
	            // 第1077行：函数定义开始
	            document.querySelectorAll('.cart-items').forEach(container => {
	                // 第1078行：遍历所有购物车项目容器
	                container.innerHTML = '';  // 第1079行：清空容器
	                
	                let totalPrice = 0;  // 第1080行：初始化总价格
	                
	                if (cart.length === 0) {
	                    // 第1081行：如果购物车为空
	                    container.innerHTML = '<div class="empty-cart-message">购物车是空的，请选择套餐</div>';  // 第1082行：显示空购物车消息
	                } else {
	                    // 第1083行：如果购物车不为空
	                    cart.forEach((item, index) => {
	                        // 第1084行：遍历购物车中的每个项目
	                        const cartItemElement = document.createElement('div');  // 第1085行：创建购物车项目元素
	                        cartItemElement.className = 'cart-item';  // 第1086行：添加CSS类
	                        
	                        const optionsHtml = item.options.map(option => `<div>• ${option}</div>`).join('');  // 第1087行：生成选项HTML
	                        
	                        cartItemElement.innerHTML = `
	                            <div class="cart-item-name">
	                                <div><strong>${item.name}</strong></div>
	                                <div style="font-size:0.9rem; color:#666; margin-top:5px;">
	                                    ${optionsHtml}
	                                </div>
	                            </div>
	                            <div class="cart-item-price">¥${item.totalPrice.toFixed(2)}</div>
	                            <button class="cart-item-remove" data-index="${index}">
	                                <i class="fas fa-times"></i>
	                            </button>
	                        `;
	                        
	                        container.appendChild(cartItemElement);  // 第1088行：将购物车项目添加到容器
	                        
	                        totalPrice += item.totalPrice;  // 第1089行：累加总价格
	                        
	                        cartItemElement.querySelector('.cart-item-remove').addEventListener('click', function() {
	                            // 第1090行：添加删除按钮点击事件
	                            const indexToRemove = parseInt(this.dataset.index);  // 第1091行：获取要删除的索引
	                            cart.splice(indexToRemove, 1);  // 第1092行：从购物车中删除项目
	                            updateCartDisplay();  // 第1093行：更新购物车显示
	                            showNotification('已从购物车中移除商品');  // 第1094行：显示通知
	                        });
	                    });
	                }
	                
	                const totalPriceElement = container.closest('.cart-section').querySelector('.total-price');  // 第1095行：获取总价格元素
	                const checkoutBtn = container.closest('.cart-section').querySelector('.checkout-btn');  // 第1096行：获取结算按钮
	                
	                if (totalPriceElement) {
	                    // 第1097行：如果总价格元素存在
	                    totalPriceElement.textContent = `¥${totalPrice.toFixed(2)}`;  // 第1098行：更新总价格显示
	                }
	                
	                if (checkoutBtn) {
	                    // 第1099行：如果结算按钮存在
	                    checkoutBtn.disabled = cart.length === 0;  // 第1100行：根据购物车是否为空启用/禁用按钮
	                }
	            });
	        }  // 第1101行：函数定义结束
	        
	        // 第1102行：初始化结算
	        function initCheckout(container) {
	            // 第1103行：函数定义开始
	            const checkoutBtn = container.querySelector('.checkout-btn');  // 第1104行：获取结算按钮
	            if (checkoutBtn) {
	                // 第1105行：如果结算按钮存在
	                checkoutBtn.addEventListener('click', function() {
	                    // 第1106行：添加点击事件
	                    const deliveryType = container.querySelector('input[name="deliveryType"]:checked').value;  // 第1107行：获取配送类型
	                    const orderNote = container.querySelector('#orderNote') ? container.querySelector('#orderNote').value.trim() : '';  // 第1108行：获取订单备注
	                    
	                    let deliveryInfo = '';  // 第1109行：初始化配送信息
	                    let hasScreenshot = false;  // 第1110行：初始化是否有截图标志
	                    let screenshotData = null;  // 第1111行：初始化截图数据
	                    
	                    if (deliveryType === 'delivery') {
	                        // 第1112行：如果选择宅急送
	                        const customerName = container.querySelector('#customerName') ? container.querySelector('#customerName').value.trim() : '';  // 第1113行：获取客户姓名
	                        const customerPhone = container.querySelector('#customerPhone') ? container.querySelector('#customerPhone').value.trim() : '';  // 第1114行：获取联系电话
	                        const deliveryAddress = container.querySelector('#deliveryAddress') ? container.querySelector('#deliveryAddress').value.trim() : '';  // 第1115行：获取配送地址
	                        
	                        if (!customerName) {
	                            // 第1116行：如果客户姓名为空
	                            showNotification('请输入收货人姓名', 'error');  // 第1117行：显示通知
	                            const nameInput = container.querySelector('#customerName');  // 第1118行：获取姓名输入框
	                            if (nameInput) nameInput.focus();  // 第1119行：聚焦到姓名输入框
	                            return;  // 第1120行：返回
	                        }
	                        
	                        if (!customerPhone) {
	                            // 第1121行：如果联系电话为空
	                            showNotification('请输入联系电话', 'error');  // 第1122行：显示通知
	                            const phoneInput = container.querySelector('#customerPhone');  // 第1123行：获取电话输入框
	                            if (phoneInput) phoneInput.focus();  // 第1124行：聚焦到电话输入框
	                            return;  // 第1125行：返回
	                        }
	                        
	                        if (!deliveryAddress) {
	                            // 第1126行：如果配送地址为空
	                            showNotification('请输入配送地址', 'error');  // 第1127行：显示通知
	                            const addressInput = container.querySelector('#deliveryAddress');  // 第1128行：获取地址输入框
	                            if (addressInput) addressInput.focus();  // 第1129行：聚焦到地址输入框
	                            return;  // 第1130行：返回
	                        }
	                        
	                        deliveryInfo = `配送方式：宅急送\n收货人：${customerName}\n联系电话：${customerPhone}\n配送地址：${deliveryAddress}`;  // 第1131行：构建配送信息
	                    } else {
	                        // 第1132行：如果选择到店自提
	                        const pickupMethod = container.querySelector('input[name="pickupMethod"]:checked').value;  // 第1133行：获取自提方式
	                        
	                        if (pickupMethod === 'text') {
	                            // 第1134行：如果选择手动填写
	                            const pickupCity = container.querySelector('#pickupCityInput') ? container.querySelector('#pickupCityInput').value.trim() : '';  // 第1135行：获取自提城市
	                            const pickupStore = container.querySelector('#pickupStoreInput') ? container.querySelector('#pickupStoreInput').value.trim() : '';  // 第1136行：获取自提门店
	                            
	                            if (!pickupCity) {
	                                // 第1137行：如果自提城市为空
	                                showNotification('请输入自提城市', 'error');  // 第1138行：显示通知
	                                const cityInput = container.querySelector('#pickupCityInput');  // 第1139行：获取城市输入框
	                                if (cityInput) cityInput.focus();  // 第1140行：聚焦到城市输入框
	                                return;  // 第1141行：返回
	                            }
	                            
	                            if (!pickupStore) {
	                                // 第1142行：如果自提门店为空
	                                showNotification('请输入自提门店', 'error');  // 第1143行：显示通知
	                                const storeInput = container.querySelector('#pickupStoreInput');  // 第1144行：获取门店输入框
	                                if (storeInput) storeInput.focus();  // 第1145行：聚焦到门店输入框
	                                return;  // 第1146行：返回
	                            }
	                            
	                            deliveryInfo = `配送方式：到店自提\n信息提供：手动填写\n自提城市：${pickupCity}\n自提门店：${pickupStore}`;  // 第1147行：构建配送信息
	                        } else {
	                            // 第1148行：如果选择上传截图
	                            const screenshotInput = container.querySelector('#storeScreenshot');  // 第1149行：获取截图输入框
	                            
	                            if (!screenshotInput.files || !screenshotInput.files.length) {
	                                // 第1150行：如果没有选择截图文件
	                                showNotification('请上传门店截图', 'error');  // 第1151行：显示通知
	                                return;  // 第1152行：返回
	                            }
	                            
	                            const file = screenshotInput.files[0];  // 第1153行：获取第一个文件
	                            const reader = new FileReader();  // 第1154行：创建文件阅读器
	                            
	                            reader.onload = function(e) {
	                                // 第1155行：文件读取完成事件
	                                screenshotData = e.target.result;  // 第1156行：获取截图数据
	                                hasScreenshot = true;  // 第1157行：设置是否有截图标志
	                                
	                                deliveryInfo = `配送方式：到店自提\n信息提供：截图上传`;  // 第1158行：构建配送信息
	                                
	                                completeCheckout(deliveryType, orderNote, deliveryInfo, hasScreenshot, screenshotData, container);  // 第1159行：完成结算
	                            };
	                            
	                            reader.readAsDataURL(file);  // 第1160行：读取文件为DataURL
	                            return;  // 第1161行：返回
	                        }
	                    }
	                    
	                    completeCheckout(deliveryType, orderNote, deliveryInfo, hasScreenshot, screenshotData, container);  // 第1162行：完成结算
	                });
	            }
	        }  // 第1163行：函数定义结束
	        
	        // 第1164行：完成结算
	        async function completeCheckout(deliveryType, orderNote, deliveryInfo, hasScreenshot, screenshotData, container) {
	            // 第1165行：异步函数定义开始
	            let totalPrice = 0;  // 第1166行：初始化总价格
	            cart.forEach(item => {
	                // 第1167行：计算购物车总价格
	                totalPrice += item.totalPrice;  // 第1168行：累加
	            });
	            
	            let orderSummary = "订单详情：\n\n";  // 第1169行：初始化订单摘要
	            cart.forEach((item, index) => {
	                // 第1170行：构建订单摘要
	                orderSummary += `${index + 1}. ${item.name} - ¥${item.totalPrice.toFixed(2)}\n`;
	                
	                const optionCount = {};  // 第1171行：初始化选项计数对象
	                item.options.forEach(option => {
	                    // 第1172行：统计每个选项的数量
	                    optionCount[option] = (optionCount[option] || 0) + 1;  // 第1173行：计数
	                });
	                
	                Object.keys(optionCount).forEach(option => {
	                    // 第1174行：遍历选项计数对象
	                    const count = optionCount[option];  // 第1175行：获取选项数量
	                    orderSummary += `   ${option}${count > 1 ? ` ×${count}` : ''}\n`;  // 第1176行：添加到订单摘要
	                });
	                orderSummary += "\n";
	            });
	            
	            orderSummary += `\n总计：¥${totalPrice.toFixed(2)}\n`;  // 第1177行：添加总计到订单摘要
	            orderSummary += `\n${deliveryInfo}\n`;  // 第1178行：添加配送信息到订单摘要
	            if (orderNote) {
	                // 第1179行：如果有订单备注
	                orderSummary += `备注：${orderNote}\n`;  // 第1180行：添加订单备注到订单摘要
	            }
	            
	            const confirmed = confirm(`请确认订单信息：\n\n${orderSummary}\n\n确认提交订单吗？`);  // 第1181行：显示确认对话框
	            
	            if (confirmed) {
	                // 第1182行：如果用户确认
	                const orderId = 'KFC' + Date.now().toString().slice(-6) + Math.floor(Math.random() * 100);  // 第1183行：生成订单ID
	                const timestamp = new Date().toLocaleString('zh-CN');  // 第1184行：获取当前时间戳
	                
	                const orderData = {
	                    // 第1185行：创建订单数据对象
	                    id: orderId,
	                    timestamp: timestamp,
	                    status: 'new',
	                    cart: JSON.parse(JSON.stringify(cart)),  // 第1186行：深拷贝购物车
	                    deliveryInfo: deliveryInfo,
	                    orderNote: orderNote,
	                    deliveryType: deliveryType,
	                    totalPrice: totalPrice,
	                    hasScreenshot: hasScreenshot,
	                    screenshotData: screenshotData,
	                    userId: currentUserId
	                };
	                
	                try {
	                    // 第1187行：尝试保存订单到LeanCloud
	                    const savedOrder = await saveOrderToCloud(orderData);  // 第1188行：保存订单到云端
	                    
	                    // 第1189行：更新本地订单数组
	                    orders.unshift(savedOrder);  // 第1190行：添加到订单数组开头
	                    newOrdersCount++;  // 第1191行：增加新订单计数
	                    
	                    cart = [];  // 第1192行：清空购物车
	                    updateCartDisplay();  // 第1193行：更新购物车显示
	                    
	                    resetForm(container);  // 第1194行：重置表单
	                    
	                    const orderSubmitted = confirm(`订单提交成功！\n订单号：${orderId}\n\n点击"确定"查看您的订单详情，或点击"取消"返回首页。`);  // 第1195行：显示成功对话框
	                    
	                    if (orderSubmitted) {
	                        // 第1196行：如果用户点击确定
	                        showMyOrdersPage();  // 第1197行：显示我的订单页面
	                        
	                        const url = new URL(window.location);  // 第1198行：创建URL对象
	                        url.searchParams.set('order', orderId);  // 第1199行：设置订单ID参数
	                        window.history.pushState({}, '', url);  // 第1200行：更新浏览器历史记录
	                        
	                        setTimeout(() => {
	                            // 第1201行：延迟执行
	                            document.getElementById('orderSearchInput').value = orderId;  // 第1202行：设置搜索框值为订单ID
	                            searchUserOrder(orderId);  // 第1203行：搜索用户订单
	                            
	                            const orderElements = document.querySelectorAll('.user-order-item');  // 第1204行：获取所有用户订单元素
	                            orderElements.forEach(el => {
	                                // 第1205行：遍历订单元素
	                                const orderIdElement = el.querySelector('.user-order-id');  // 第1206行：获取订单ID元素
	                                if (orderIdElement && orderIdElement.textContent.includes(orderId)) {
	                                    // 第1207行：如果订单ID匹配
	                                    el.style.animation = 'highlightOrder 2s';  // 第1208行：添加高亮动画
	                                    el.scrollIntoView({ behavior: 'smooth', block: 'center' });  // 第1209行：滚动到该元素
	                                }
	                            });
	                        }, 100);
	                    } else {
	                        // 第1210行：如果用户点击取消
	                        showPage('homePage');  // 第1211行：显示首页
	                    }
	                    
	                    if (document.getElementById('adminPanel').classList.contains('active')) {
	                        // 第1212行：如果管理员面板打开
	                        renderOrders('all');  // 第1213行：重新渲染订单
	                    }
	                } catch (error) {
	                    // 第1214行：捕获保存订单错误
	                    console.error("保存订单失败:", error);  // 第1215行：错误日志
	                    showNotification("订单提交失败，请重试", "error");  // 第1216行：显示错误通知
	                }
	            }
	        }  // 第1217行：异步函数定义结束
	        
	        // 第1218行：重置表单
	        function resetForm(container) {
	            // 第1219行：函数定义开始
	            container.querySelectorAll('input[type="text"], input[type="tel"], textarea').forEach(input => {
	                // 第1220行：遍历所有表单输入框
	                input.value = '';  // 第1221行：清空值
	            });
	            
	            const deliveryRadio = container.querySelector('input[name="deliveryType"][value="delivery"]');  // 第1222行：获取宅急送单选按钮
	            if (deliveryRadio) {
	                // 第1223行：如果单选按钮存在
	                deliveryRadio.checked = true;  // 第1224行：设置为选中
	                const deliveryFields = container.querySelector('.delivery-fields');  // 第1225行：获取配送字段区域
	                const pickupFields = container.querySelector('.pickup-fields');  // 第1226行：获取自提字段区域
	                if (deliveryFields) deliveryFields.classList.remove('hidden');  // 第1227行：显示配送字段
	                if (pickupFields) pickupFields.classList.add('hidden');  // 第1228行：隐藏自提字段
	            }
	            
	            const textMethodRadio = container.querySelector('input[name="pickupMethod"][value="text"]');  // 第1229行：获取手动填写单选按钮
	            if (textMethodRadio) {
	                // 第1230行：如果单选按钮存在
	                textMethodRadio.checked = true;  // 第1231行：设置为选中
	                const textFields = container.querySelector('.text-method-fields');  // 第1232行：获取文本字段区域
	                const screenshotFields = container.querySelector('.screenshot-method-fields');  // 第1233行：获取截图字段区域
	                if (textFields) textFields.classList.remove('hidden');  // 第1234行：显示文本字段
	                if (screenshotFields) screenshotFields.classList.add('hidden');  // 第1235行：隐藏截图字段
	            }
	            
	            const screenshotInput = container.querySelector('#storeScreenshot');  // 第1236行：获取截图输入框
	            const previewContainer = container.querySelector('.screenshot-preview');  // 第1237行：获取预览容器
	            const uploadArea = container.querySelector('.screenshot-upload-area');  // 第1238行：获取上传区域
	            if (screenshotInput) {
	                // 第1239行：如果截图输入框存在
	                screenshotInput.value = '';  // 第1240行：清空值
	                if (previewContainer) previewContainer.classList.add('hidden');  // 第1241行：隐藏预览容器
	                if (uploadArea) uploadArea.style.display = 'block';  // 第1242行：显示上传区域
	            }
	        }  // 第1243行：函数定义结束
	        
	        // 第1244行：初始化管理员面板
	        function initAdminPanel() {
	            // 第1245行：函数定义开始
	            const adminBtn = document.getElementById('adminBtn');  // 第1246行：获取管理员按钮
	            const closePanel = document.getElementById('closePanel');  // 第1247行：获取关闭面板按钮
	            const panelOverlay = document.getElementById('panelOverlay');  // 第1248行：获取面板遮罩层
	            const adminPanel = document.getElementById('adminPanel');  // 第1249行：获取管理员面板
	            const clearAllOrders = document.getElementById('clearAllOrders');  // 第1250行：获取清空所有订单按钮
	            const adminTabs = document.querySelectorAll('.admin-tab');  // 第1251行：获取所有管理员标签页
	            
	            adminBtn.addEventListener('click', function() {
	                // 第1252行：添加管理员按钮点击事件
	                const passwordModal = document.getElementById('passwordModal');  // 第1253行：获取密码模态框
	                const adminPasswordInput = document.getElementById('adminPassword');  // 第1254行：获取密码输入框
	                
	                passwordModal.classList.add('active');  // 第1255行：显示密码模态框
	                adminPasswordInput.focus();  // 第1256行：聚焦到密码输入框
	            });
	            
	            closePanel.addEventListener('click', function() {
	                // 第1257行：添加关闭面板按钮点击事件
	                adminPanel.classList.remove('active');  // 第1258行：隐藏管理员面板
	                panelOverlay.classList.remove('active');  // 第1259行：隐藏遮罩层
	                document.body.style.overflow = 'auto';  // 第1260行：允许页面滚动
	            });
	            
	            panelOverlay.addEventListener('click', function() {
	                // 第1261行：添加面板遮罩层点击事件
	                adminPanel.classList.remove('active');  // 第1262行：隐藏管理员面板
	                panelOverlay.classList.remove('active');  // 第1263行：隐藏遮罩层
	                document.body.style.overflow = 'auto';  // 第1264行：允许页面滚动
	            });
	            
	            clearAllOrders.addEventListener('click', function() {
	                // 第1265行：添加清空所有订单按钮点击事件
	                if (orders.length > 0 && confirm('确定要清空所有订单吗？此操作不可恢复！')) {
	                    // 第1266行：如果有订单且用户确认
	                    orders = [];  // 第1267行：清空订单数组
	                    newOrdersCount = 0;  // 第1268行：重置新订单计数
	                    
	                    // 第1269行：更新本地存储
	                    localStorage.setItem('kfcOrders', JSON.stringify(orders));  // 第1270行：保存订单数据
	                    localStorage.setItem('newOrdersCount', newOrdersCount);  // 第1271行：保存新订单数量
	                    
	                    updateOrderBadge();  // 第1272行：更新订单徽章
	                    renderOrders('all');  // 第1273行：重新渲染订单
	                    
	                    // 第1274行：注意：这里不会删除LeanCloud上的数据，需要手动删除
	                    showNotification('已清空本地订单缓存，请注意LeanCloud上的数据需要手动清理', 'success');  // 第1275行：显示通知
	                }
	            });
	            
	            adminTabs.forEach(tab => {
	                // 第1276行：遍历所有管理员标签页
	                tab.addEventListener('click', function() {
	                    // 第1277行：添加点击事件
	                    const tabId = this.dataset.tab;  // 第1278行：获取标签页ID
	                    
	                    adminTabs.forEach(t => t.classList.remove('active'));  // 第1279行：移除所有标签页的激活类
	                    
	                    this.classList.add('active');  // 第1280行：添加当前标签页的激活类
	                    
	                    document.querySelectorAll('.admin-tab-content').forEach(content => {
	                        // 第1281行：隐藏所有标签内容
	                        content.classList.remove('active');  // 第1282行：移除激活类
	                    });
	                    
	                    document.getElementById(`${tabId}Tab`).classList.add('active');  // 第1283行：显示当前标签内容
	                    
	                    if (tabId === 'meals') {
	                        // 第1284行：如果是套餐管理标签页
	                        updateMealList('all');  // 第1285行：更新套餐列表
	                    }
	                });
	            });
	            
	            document.querySelectorAll('.filter-btn').forEach(btn => {
	                // 第1286行：遍历所有筛选按钮
	                if (btn.id !== 'clearAllOrders') {
	                    // 第1287行：排除清空所有订单按钮
	                    btn.addEventListener('click', function() {
	                        // 第1288行：添加点击事件
	                        document.querySelectorAll('.filter-btn').forEach(b => {
	                            // 第1289行：移除所有筛选按钮的激活类
	                            if (b.id !== 'clearAllOrders') {
	                                // 第1290行：排除清空所有订单按钮
	                                b.classList.remove('active');  // 第1291行：移除激活类
	                            }
	                        });
	                        
	                        this.classList.add('active');  // 第1292行：添加当前按钮的激活类
	                        
	                        const filter = this.dataset.filter;  // 第1293行：获取筛选类型
	                        renderOrders(filter);  // 第1294行：渲染订单
	                    });
	                }
	            });
	        }  // 第1295行：函数定义结束
	        
	        // 第1296行：渲染订单（管理员）
	        async function renderOrders(filter = 'all') {
	            // 第1297行：异步函数定义开始
	            const ordersContainer = document.getElementById('ordersContainer');  // 第1298行：获取订单容器
	            const noOrdersMessage = document.getElementById('noOrdersMessage');  // 第1299行：获取无订单提示
	            const loadingAdminOrders = document.getElementById('loadingAdminOrders');  // 第1300行：获取加载提示
	            
	            // 第1301行：隐藏加载提示
	            if (loadingAdminOrders) {
	                loadingAdminOrders.style.display = 'none';  // 第1302行：隐藏加载提示
	            }
	            
	            ordersContainer.innerHTML = '';  // 第1303行：清空订单容器
	            
	            let filteredOrders = orders;  // 第1304行：初始化筛选后的订单数组
	            if (filter !== 'all') {
	                // 第1305行：如果不是全部订单
	                filteredOrders = orders.filter(order => order.status === filter);  // 第1306行：按状态筛选
	            }
	            
	            if (filteredOrders.length === 0) {
	                // 第1307行：如果没有订单
	                noOrdersMessage.style.display = 'block';  // 第1308行：显示无订单提示
	                return;  // 第1309行：返回
	            }
	            
	            noOrdersMessage.style.display = 'none';  // 第1310行：隐藏无订单提示
	            
	            // 第1311行：渲染订单列表
	            filteredOrders.forEach(order => {
	                // 第1312行：遍历筛选后的订单
	                const orderElement = createOrderElement(order);  // 第1313行：创建订单元素
	                ordersContainer.appendChild(orderElement);  // 第1314行：添加到订单容器
	            });
	        }  // 第1315行：异步函数定义结束
	        
	        // 第1316行：创建订单元素
	        function createOrderElement(order) {
	            // 第1317行：函数定义开始
	            const orderElement = document.createElement('div');  // 第1318行：创建订单元素
	            orderElement.className = 'admin-order-item';  // 第1319行：添加CSS类
	            
	            let statusText, statusClass;  // 第1320行：声明状态文本和样式类变量
	            switch(order.status) {
	                // 第1321行：根据订单状态设置
	                case 'new':
	                    statusText = '新订单';  // 第1322行：新订单
	                    statusClass = 'status-new';  // 第1323行：新订单样式
	                    break;
	                case 'processing':
	                    statusText = '处理中';  // 第1324行：处理中
	                    statusClass = 'status-processing';  // 第1325行：处理中样式
	                    break;
	                case 'completed':
	                    statusText = '已完成';  // 第1326行：已完成
	                    statusClass = 'status-completed';  // 第1327行：已完成样式
	                    break;
	                default:
	                    statusText = '新订单';  // 第1328行：默认新订单
	                    statusClass = 'status-new';  // 第1329行：默认新订单样式
	            }
	            
	            const deliveryTypeText = order.deliveryType === 'delivery' ? '宅急送' : '到店自提';  // 第1330行：配送类型文本
	            
	            let itemsHTML = '';  // 第1331行：初始化项目HTML
	            order.cart.forEach(item => {
	                // 第1332行：遍历订单中的购物车项目
	                const optionCount = {};  // 第1333行：初始化选项计数对象
	                item.options.forEach(option => {
	                    // 第1334行：统计每个选项的数量
	                    optionCount[option] = (optionCount[option] || 0) + 1;  // 第1335行：计数
	                });
	                
	                const optionText = Object.keys(optionCount).map(option => {
	                    // 第1336行：构建选项文本
	                    const count = optionCount[option];  // 第1337行：获取选项数量
	                    return `${option}${count > 1 ? ` ×${count}` : ''}`;  // 第1338行：返回选项文本
	                }).join(', ');  // 第1339行：用逗号连接
	                
	                itemsHTML += `<div class="order-item-detail">
	                    <div><strong>${item.name}</strong> - ¥${item.totalPrice.toFixed(2)}</div>
	                    <div style="font-size:0.9rem; color:#666;">${optionText}</div>
	                </div>`;  // 第1340行：添加到项目HTML
	            });
	            
	            const infoLines = order.deliveryInfo.split('\n');  // 第1341行：分割配送信息为行
	            let deliveryHTML = '';  // 第1342行：初始化配送信息HTML
	            infoLines.forEach(line => {
	                // 第1343行：遍历配送信息行
	                if (line.trim()) {
	                    // 第1344行：如果行不为空
	                    deliveryHTML += `<p>${line}</p>`;  // 第1345行：添加到配送信息HTML
	                }
	            });
	            
	            let screenshotHTML = '';  // 第1346行：初始化截图HTML
	            if (order.hasScreenshot && order.screenshotData) {
	                // 第1347行：如果有截图
	                screenshotHTML = `
	                    <div class="screenshot-container">
	                        <p><strong>门店截图：</strong></p>
	                        <img src="${order.screenshotData}" alt="门店截图" class="screenshot-thumbnail" data-order-id="${order.objectId || order.id}">
	                    </div>
	                `;  // 第1348行：添加截图HTML
	            }
	            
	            const userInfo = order.userId ? `<p><strong>用户ID：</strong>${order.userId.substring(0, 12)}...</p>` : '';  // 第1349行：用户信息HTML
	            
	            orderElement.innerHTML = `
	                <div class="order-id">订单号：${order.id}</div>
	                <div class="order-time">${order.timestamp} | ${deliveryTypeText}</div>
	                <div class="order-status ${statusClass}">${statusText}</div>
	                
	                <div class="order-details">
	                    <div class="order-items">
	                        ${itemsHTML}
	                    </div>
	                    
	                    <div class="order-total">
	                        总计：¥${order.totalPrice.toFixed(2)}
	                    </div>
	                </div>
	                
	                <div class="customer-info">
	                    ${deliveryHTML}
	                    ${userInfo}
	                    ${order.orderNote ? `<p><strong>备注：</strong>${order.orderNote}</p>` : ''}
	                    ${screenshotHTML}
	                </div>
	                
	                <div style="margin-top: 15px; display: flex; gap: 10px;">
	                    ${order.status === 'new' ? `<button class="filter-btn" style="padding: 6px 12px; font-size: 0.9rem;" data-action="process" data-order-id="${order.objectId || order.id}">标记为处理中</button>` : ''}
	                    ${order.status === 'processing' ? `<button class="filter-btn" style="padding: 6px 12px; font-size: 0.9rem;" data-action="complete" data-order-id="${order.objectId || order.id}">标记为已完成</button>` : ''}
	                    <button class="filter-btn" style="padding: 6px 12px; font-size: 0.9rem; background-color: #f44336; color: white;" data-action="delete" data-order-id="${order.objectId || order.id}">删除订单</button>
	                </div>
	            `;  // 第1350行：设置订单元素HTML内容
	            
	            orderElement.querySelectorAll('button[data-action]').forEach(btn => {
	                // 第1351行：遍历所有操作按钮
	                btn.addEventListener('click', function() {
	                    // 第1352行：添加点击事件
	                    const action = this.dataset.action;  // 第1353行：获取操作类型
	                    const orderId = this.dataset.orderId;  // 第1354行：获取订单ID
	                    handleOrderAction(action, orderId);  // 第1355行：处理订单操作
	                });
	            });
	            
	            if (order.hasScreenshot && order.screenshotData) {
	                // 第1356行：如果有截图
	                const screenshotImg = orderElement.querySelector('.screenshot-thumbnail');  // 第1357行：获取截图图片
	                if (screenshotImg) {
	                    // 第1358行：如果截图图片存在
	                    screenshotImg.addEventListener('click', function() {
	                        // 第1359行：添加点击事件
	                        showFullImage(order.screenshotData);  // 第1360行：显示完整图片
	                    });
	                }
	            }
	            
	            return orderElement;  // 第1361行：返回订单元素
	        }  // 第1362行：函数定义结束
	        
	        // 第1363行：处理订单操作
	        async function handleOrderAction(action, orderId) {
	            // 第1364行：异步函数定义开始
	            const orderIndex = orders.findIndex(o => (o.objectId === orderId) || (o.id === orderId));  // 第1365行：查找订单索引
	            if (orderIndex === -1) return;  // 第1366行：如果没找到订单，返回
	            
	            let confirmMessage = '';  // 第1367行：初始化确认消息
	            
	            switch(action) {
	                // 第1368行：根据操作类型设置确认消息
	                case 'process':
	                    confirmMessage = `确认将订单 ${orders[orderIndex].id} 标记为处理中吗？`;  // 第1369行：处理中确认消息
	                    break;
	                case 'complete':
	                    confirmMessage = `确认将订单 ${orders[orderIndex].id} 标记为已完成吗？`;  // 第1370行：已完成确认消息
	                    break;
	                case 'delete':
	                    confirmMessage = `确认删除订单 ${orders[orderIndex].id} 吗？`;  // 第1371行：删除确认消息
	                    break;
	            }
	            
	            if (confirm(confirmMessage)) {
	                // 第1372行：如果用户确认
	                try {
	                    // 第1373行：尝试执行操作
	                    switch(action) {
	                        case 'process':
	                            // 第1374行：标记为处理中
	                            await updateOrderStatusOnCloud(orderId, 'processing');  // 第1375行：更新订单状态到云端
	                            orders[orderIndex].status = 'processing';  // 第1376行：更新本地订单状态
	                            break;
	                        case 'complete':
	                            // 第1377行：标记为已完成
	                            await updateOrderStatusOnCloud(orderId, 'completed');  // 第1378行：更新订单状态到云端
	                            orders[orderIndex].status = 'completed';  // 第1379行：更新本地订单状态
	                            break;
	                        case 'delete':
	                            // 第1380行：删除订单
	                            await deleteOrderFromCloud(orderId);  // 第1381行：从云端删除订单
	                            orders.splice(orderIndex, 1);  // 第1382行：从本地订单数组中删除
	                            break;
	                    }
	                    
	                    // 第1383行：更新本地存储
	                    localStorage.setItem('kfcOrders', JSON.stringify(orders));  // 第1384行：保存订单数据
	                    
	                    const activeFilterBtn = document.querySelector('.filter-btn.active');  // 第1385行：获取当前激活的筛选按钮
	                    const activeFilter = activeFilterBtn ? activeFilterBtn.dataset.filter : 'all';  // 第1386行：获取当前筛选类型
	                    
	                    renderOrders(activeFilter);  // 第1387行：重新渲染订单
	                    
	                    showNotification(`订单 ${orders[orderIndex] ? orders[orderIndex].id : '已删除'} 操作成功`, 'success');  // 第1388行：显示成功通知
	                } catch (error) {
	                    // 第1389行：捕获操作错误
	                    console.error("操作失败:", error);  // 第1390行：错误日志
	                    showNotification("操作失败，请重试", "error");  // 第1391行：显示错误通知
	                }
	            }
	        }  // 第1392行：异步函数定义结束
	        
	        // 第1393行：初始化套餐管理
	        function initMealManagement() {
	            // 第1394行：函数定义开始
	            console.log("初始化套餐管理");  // 第1395行：日志输出
	            updateMealList('all');  // 第1396行：更新套餐列表
	            
	            // 第1397行：添加套餐筛选器的事件监听
	            document.querySelectorAll('.meal-filter-btn').forEach(btn => {
	                // 第1398行：遍历所有套餐筛选按钮
	                btn.addEventListener('click', function() {
	                    // 第1399行：添加点击事件
	                    document.querySelectorAll('.meal-filter-btn').forEach(b => {
	                        // 第1400行：移除所有按钮的激活类
	                        b.classList.remove('active');  // 第1401行：移除激活类
	                    });
	                    
	                    this.classList.add('active');  // 第1402行：添加当前按钮的激活类
	                    
	                    const filter = this.dataset.mealFilter;  // 第1403行：获取筛选类型
	                    updateMealList(filter);  // 第1404行：更新套餐列表
	                });
	            });
	            
	            // 第1405行：添加选项组按钮
	            document.getElementById('addOptionGroupBtn').addEventListener('click', function() {
	                // 第1406行：添加点击事件
	                addOptionGroup();  // 第1407行：添加选项组
	            });
	            
	            // 第1408行：添加固定搭配项按钮
	            document.getElementById('addFixedItemBtn').addEventListener('click', function() {
	                // 第1409行：添加点击事件
	                addFixedItem();  // 第1410行：添加固定搭配项
	            });
	            
	            // 第1411行：保存套餐按钮
	            document.getElementById('saveMealBtn').addEventListener('click', function() {
	                // 第1412行：添加点击事件
	                saveMeal();  // 第1413行：保存套餐
	            });
	            
	            // 第1414行：取消编辑按钮
	            document.getElementById('cancelEditBtn').addEventListener('click', function() {
	                // 第1415行：添加点击事件
	                cancelEdit();  // 第1416行：取消编辑
	            });
	            
	            // 第1417行：标签页切换事件
	            document.querySelectorAll('.admin-tab').forEach(tab => {
	                // 第1418行：遍历所有管理员标签页
	                tab.addEventListener('click', function() {
	                    // 第1419行：添加点击事件
	                    const tabId = this.dataset.tab;  // 第1420行：获取标签页ID
	                    if (tabId === 'addMeal') {
	                        // 第1421行：如果是添加套餐标签页
	                        resetMealForm();  // 第1422行：重置套餐表单
	                    }
	                });
	            });
	            
	            // 第1423行：监听状态切换按钮的变化
	            const statusToggle = document.getElementById('mealActive');  // 第1424行：获取状态切换按钮
	            if (statusToggle) {
	                // 第1425行：如果状态切换按钮存在
	                statusToggle.addEventListener('change', function() {
	                    // 第1426行：添加变化事件
	                    const statusText = document.getElementById('statusText');  // 第1427行：获取状态文本元素
	                    if (this.checked) {
	                        // 第1428行：如果选中
	                        statusText.textContent = '上架';  // 第1429行：设置文本为上架
	                        statusText.className = 'status-active';  // 第1430行：设置激活样式
	                    } else {
	                        // 第1431行：如果未选中
	                        statusText.textContent = '下架';  // 第1432行：设置文本为下架
	                        statusText.className = 'status-inactive';  // 第1433行：设置未激活样式
	                    }
	                });
	            }
	            
	            // 第1434行：初始化时添加一个默认选项组
	            if (document.querySelectorAll('.option-group-item').length === 0) {
	                // 第1435行：如果没有选项组
	                addOptionGroup();  // 第1436行：添加选项组
	            }
	        }  // 第1437行：函数定义结束
	        
	        // 第1438行：更新套餐列表（管理员）
	        function updateMealList(filter = 'all') {
	            // 第1439行：函数定义开始
	            const mealList = document.getElementById('mealList');  // 第1440行：获取套餐列表容器
	            const noMealsAdminMessage = document.getElementById('noMealsAdminMessage');  // 第1441行：获取无套餐提示
	            const loadingAdminMeals = document.getElementById('loadingAdminMeals');  // 第1442行：获取加载提示
	            
	            // 第1443行：隐藏加载提示
	            if (loadingAdminMeals) {
	                loadingAdminMeals.style.display = 'none';  // 第1444行：隐藏加载提示
	            }
	            
	            mealList.innerHTML = '';  // 第1445行：清空套餐列表
	            
	            let filteredMeals = meals;  // 第1446行：初始化筛选后的套餐数组
	            if (filter === 'active') {
	                // 第1447行：如果筛选已上架
	                filteredMeals = meals.filter(meal => meal.active !== false);  // 第1448行：过滤已上架套餐
	            } else if (filter === 'inactive') {
	                // 第1449行：如果筛选已下架
	                filteredMeals = meals.filter(meal => meal.active === false);  // 第1450行：过滤已下架套餐
	            }
	            
	            if (filteredMeals.length === 0) {
	                // 第1451行：如果没有套餐
	                noMealsAdminMessage.style.display = 'block';  // 第1452行：显示无套餐提示
	                return;  // 第1453行：返回
	            }
	            
	            noMealsAdminMessage.style.display = 'none';  // 第1454行：隐藏无套餐提示
	            
	            // 第1455行：渲染套餐列表
	            filteredMeals.forEach(meal => {
	                // 第1456行：遍历筛选后的套餐
	                const mealItem = document.createElement('div');  // 第1457行：创建套餐项元素
	                mealItem.className = 'meal-list-item';  // 第1458行：添加CSS类
	                
	                // 第1459行：计算选项总数
	                let totalOptions = 0;  // 第1460行：初始化选项总数
	                if (meal.optionGroups && meal.optionGroups.length > 0) {
	                    // 第1461行：如果有选项组
	                    meal.optionGroups.forEach(group => {
	                        // 第1462行：遍历选项组
	                        if (group.items) {
	                            // 第1463行：如果选项组有选项项
	                            totalOptions += group.items.length;  // 第1464行：累加选项项数量
	                        }
	                    });
	                }
	                
	                // 第1465行：计算固定搭配总数
	                let totalFixed = 0;  // 第1466行：初始化固定搭配总数
	                if (meal.fixedItems && meal.fixedItems.length > 0) {
	                    // 第1467行：如果有固定搭配
	                    meal.fixedItems.forEach(item => {
	                        // 第1468行：遍历固定搭配项
	                        totalFixed += item.quantity || 1;  // 第1469行：累加数量
	                    });
	                }
	                
	                // 第1470行：添加创建时间显示
	                const createdAt = meal.createdAt ? new Date(meal.createdAt).toLocaleString('zh-CN') : '未知时间';  // 第1471行：格式化创建时间
	                
	                mealItem.innerHTML = `
	                    <div class="meal-list-item-info">
	                        <h4>${meal.name} ${meal.active === false ? '<span class="status-inactive">(已下架)</span>' : '<span class="status-active">(已上架)</span>'}</h4>
	                        <p><strong>价格:</strong> ¥${meal.price} | <strong>标签:</strong> ${Array.isArray(meal.tags) ? meal.tags.join(', ') : meal.tags}</p>
	                        <p><strong>描述:</strong> ${meal.description}</p>
	                        <p><strong>创建时间:</strong> ${createdAt}</p>
	                        <p><strong>选项组:</strong> ${meal.optionGroups ? meal.optionGroups.length : 0} 个 | 
	                           <strong>选项项:</strong> ${totalOptions} 个 | 
	                           <strong>固定搭配:</strong> ${totalFixed} 项</p>
	                    </div>
	                    <div class="meal-list-item-actions">
	                        <div class="status-label">
	                            <label class="status-toggle">
	                                <input type="checkbox" class="status-toggle-input" data-meal-id="${meal.objectId || meal.id}" ${meal.active !== false ? 'checked' : ''}>
	                                <span class="status-slider"></span>
	                            </label>
	                            <span class="${meal.active !== false ? 'status-active' : 'status-inactive'}">${meal.active !== false ? '上架' : '下架'}</span>
	                        </div>
	                        <div style="display: flex; gap: 10px;">
	                            <button class="action-btn edit-btn" data-meal-id="${meal.objectId || meal.id}">
	                                <i class="fas fa-edit"></i> 编辑
	                            </button>
	                            <button class="action-btn delete-btn" data-meal-id="${meal.objectId || meal.id}">
	                                <i class="fas fa-trash"></i> 删除
	                            </button>
	                        </div>
	                    </div>
	                `;  // 第1472行：设置套餐项HTML内容
	                
	                mealList.appendChild(mealItem);  // 第1473行：添加到套餐列表
	            });
	            
	            // 第1474行：绑定状态切换事件
	            document.querySelectorAll('.status-toggle-input').forEach(toggle => {
	                // 第1475行：遍历所有状态切换输入框
	                toggle.addEventListener('change', function() {
	                    // 第1476行：添加变化事件
	                    const mealId = this.dataset.mealId;  // 第1477行：获取套餐ID
	                    const isActive = this.checked;  // 第1478行：获取是否激活
	                    toggleMealStatus(mealId, isActive);  // 第1479行：切换套餐状态
	                });
	            });
	            
	            // 第1480行：绑定编辑按钮事件
	            document.querySelectorAll('.edit-btn').forEach(btn => {
	                // 第1481行：遍历所有编辑按钮
	                btn.addEventListener('click', function() {
	                    // 第1482行：添加点击事件
	                    const mealId = this.dataset.mealId;  // 第1483行：获取套餐ID
	                    editMeal(mealId);  // 第1484行：编辑套餐
	                });
	            });
	            
	            // 第1485行：绑定删除按钮事件
	            document.querySelectorAll('.delete-btn').forEach(btn => {
	                // 第1486行：遍历所有删除按钮
	                btn.addEventListener('click', function() {
	                    // 第1487行：添加点击事件
	                    const mealId = this.dataset.mealId;  // 第1488行：获取套餐ID
	                    deleteMeal(mealId);  // 第1489行：删除套餐
	                });
	            });
	        }  // 第1490行：函数定义结束
	        
	        // 第1491行：切换套餐状态
	        async function toggleMealStatus(mealId, isActive) {
	            // 第1492行：异步函数定义开始
	            const mealIndex = meals.findIndex(m => (m.objectId === mealId) || (m.id === mealId));  // 第1493行：查找套餐索引
	            if (mealIndex === -1) return;  // 第1494行：如果没找到套餐，返回
	            
	            const meal = meals[mealIndex];  // 第1495行：获取套餐
	            const action = isActive ? '上架' : '下架';  // 第1496行：设置操作文本
	            
	            if (confirm(`确定要将套餐 "${meal.name}" ${action} 吗？${isActive ? '' : '下架后用户将无法看到此套餐。'}`)) {
	                // 第1497行：如果用户确认
	                try {
	                    // 第1498行：尝试更新套餐状态
	                    // 第1499行：更新套餐数据
	                    meals[mealIndex].active = isActive;  // 第1500行：更新激活状态
	                    meals[mealIndex].updatedAt = Date.now();  // 第1501行：更新更新时间
	                    
	                    // 第1502行：保存到LeanCloud
	                    await saveMealToCloud(meals[mealIndex]);  // 第1503行：保存套餐到云端
	                    
	                    updateHomePage();  // 第1504行：更新首页
	                    
	                    const activeFilter = document.querySelector('.meal-filter-btn.active').dataset.mealFilter;  // 第1505行：获取当前筛选类型
	                    updateMealList(activeFilter);  // 第1506行：更新套餐列表
	                    
	                    showNotification(`套餐"${meal.name}"已${action}`, 'success');  // 第1507行：显示成功通知
	                } catch (error) {
	                    // 第1508行：捕获保存错误
	                    console.error("切换套餐状态失败:", error);  // 第1509行：错误日志
	                    showNotification("操作失败，请重试", "error");  // 第1510行：显示错误通知
	                    
	                    // 第1511行：恢复复选框状态
	                    const toggle = document.querySelector(`.status-toggle-input[data-meal-id="${mealId}"]`);  // 第1512行：获取状态切换输入框
	                    if (toggle) {
	                        toggle.checked = !isActive;  // 第1513行：恢复原始状态
	                    }
	                }
	            } else {
	                // 第1514行：如果用户取消
	                // 第1515行：恢复复选框状态
	                const toggle = document.querySelector(`.status-toggle-input[data-meal-id="${mealId}"]`);  // 第1516行：获取状态切换输入框
	                if (toggle) {
	                    toggle.checked = !isActive;  // 第1517行：恢复原始状态
	                }
	            }
	        }  // 第1518行：异步函数定义结束
	        
	        // 第1519行：编辑套餐
	        function editMeal(mealId) {
	            // 第1520行：函数定义开始
	            const meal = meals.find(m => (m.objectId === mealId) || (m.id === mealId));  // 第1521行：查找套餐
	            if (!meal) {
	                // 第1522行：如果没找到套餐
	                showNotification('套餐不存在或已被删除', 'error');  // 第1523行：显示错误通知
	                return;  // 第1524行：返回
	            }
	            
	            // 第1525行：填充表单
	            document.getElementById('currentMealId').value = meal.objectId || meal.id;  // 第1526行：设置当前套餐ID
	            document.getElementById('mealName').value = meal.name;  // 第1527行：设置套餐名称
	            document.getElementById('mealPrice').value = meal.price;  // 第1528行：设置套餐价格
	            document.getElementById('mealTags').value = Array.isArray(meal.tags) ? meal.tags.join(', ') : meal.tags;  // 第1529行：设置套餐标签
	            document.getElementById('mealDescription').value = meal.description;  // 第1530行：设置套餐描述
	            document.getElementById('mealActive').checked = meal.active !== false;  // 第1531行：设置套餐状态
	            
	            // 第1532行：更新状态文本
	            const statusText = document.getElementById('statusText');  // 第1533行：获取状态文本元素
	            if (meal.active !== false) {
	                // 第1534行：如果套餐已上架
	                statusText.textContent = '上架';  // 第1535行：设置文本为上架
	                statusText.className = 'status-active';  // 第1536行：设置激活样式
	            } else {
	                // 第1537行：如果套餐已下架
	                statusText.textContent = '下架';  // 第1538行：设置文本为下架
	                statusText.className = 'status-inactive';  // 第1539行：设置未激活样式
	            }
	            
	            // 第1540行：更新标题
	            document.getElementById('addMealTitle').innerHTML = `<i class="fas fa-edit"></i> 编辑套餐：${meal.name.substring(0, 20)}${meal.name.length > 20 ? '...' : ''}`;  // 第1541行：设置标题
	            
	            // 第1542行：显示取消编辑按钮
	            document.getElementById('cancelEditBtn').style.display = 'block';  // 第1543行：显示取消编辑按钮
	            
	            // 第1544行：清空选项组和固定搭配
	            document.getElementById('optionGroupsManagement').innerHTML = '';  // 第1545行：清空选项组管理容器
	            document.getElementById('fixedItemsManagement').innerHTML = '';  // 第1546行：清空固定搭配管理容器
	            
	            // 第1547行：添加选项组
	            if (meal.optionGroups && meal.optionGroups.length > 0) {
	                // 第1548行：如果有选项组
	                meal.optionGroups.forEach((group, index) => {
	                    // 第1549行：遍历选项组
	                    const groupId = 'group-' + Date.now() + '-' + Math.random().toString(36).substr(2, 9);  // 第1550行：生成组ID
	                    
	                    const optionGroup = document.createElement('div');  // 第1551行：创建选项组元素
	                    optionGroup.className = 'option-group-item';  // 第1552行：添加CSS类
	                    optionGroup.innerHTML = `
	                        <div class="option-group-header">
	                            <div class="option-group-title">选项组 ${index + 1}</div>
	                            <div>
	                                <button class="action-btn add-btn add-option-item-btn" data-group-id="${groupId}">
	                                    <i class="fas fa-plus"></i> 添加选项
	                                </button>
	                                <button class="action-btn delete-btn delete-option-group-btn" data-group-id="${groupId}">
	                                    <i class="fas fa-trash"></i> 删除组
	                                </button>
	                            </div>
	                        </div>
	                        <div class="form-row">
	                            <div class="form-group">
	                                <label class="form-label">组标题 <span class="required">*</span></label>
	                                <input type="text" class="form-input option-group-title-input" data-group-id="${groupId}" placeholder="例如：① 任选3份（可以重复选）" value="${group.title || '选项组' + (index + 1)}">
	                            </div>
	                            <div class="form-group">
	                                <label class="form-label">规则描述 <span class="required">*</span></label>
	                                <input type="text" class="form-input option-group-rules-input" data-group-id="${groupId}" placeholder="例如：需要选择3份，可以重复选择相同选项" value="${group.rules || '请选择选项'}">
	                            </div>
	                        </div>
	                        <div class="form-row">
	                            <div class="form-group">
	                                <label class="form-label">最少选择数量 <span class="required">*</span></label>
	                                <input type="number" class="form-input option-group-min-input" data-group-id="${groupId}" placeholder="例如：3" min="0" value="${group.minSelect || 1}">
	                            </div>
	                            <div class="form-group">
	                                <label class="form-label">最多选择数量 <span class="required">*</span></label>
	                                <input type="number" class="form-input option-group-max-input" data-group-id="${groupId}" placeholder="例如：3" min="1" value="${group.maxSelect || 1}">
	                            </div>
	                        </div>
	                        <div class="form-row">
	                            <div class="form-group">
	                                <label class="form-label">是否可以重复选择</label>
	                                <div style="margin-top: 8px;">
	                                    <label style="display: flex; align-items: center; gap: 8px;">
	                                        <input type="checkbox" class="option-group-repeat-input" data-group-id="${groupId}" ${group.repeat ? 'checked' : ''}>
	                                        <span>可以重复选择相同选项</span>
	                                    </label>
	                                </div>
	                            </div>
	                            <div class="form-group">
	                                <label class="form-label">每个选项最多选择几份</label>
	                                <input type="number" class="form-input option-group-max-per-item-input" data-group-id="${groupId}" placeholder="例如：2" min="1" value="${group.maxPerItem || (group.repeat ? 999 : 1)}">
	                            </div>
	                        </div>
	                        <div class="option-items-list" id="option-items-${groupId}">
	                        </div>
	                    `;  // 第1553行：设置选项组HTML内容
	                    
	                    document.getElementById('optionGroupsManagement').appendChild(optionGroup);  // 第1554行：添加到选项组管理容器
	                    
	                    // 第1555行：绑定选项组按钮事件
	                    optionGroup.querySelector('.add-option-item-btn').addEventListener('click', function() {
	                        // 第1556行：添加添加选项按钮点击事件
	                        addOptionItem(groupId);  // 第1557行：添加选项项
	                    });
	                    
	                    optionGroup.querySelector('.delete-option-group-btn').addEventListener('click', function() {
	                        // 第1558行：添加删除选项组按钮点击事件
	                        deleteOptionGroup(groupId);  // 第1559行：删除选项组
	                    });
	                    
	                    // 第1560行：添加选项项
	                    if (group.items && group.items.length > 0) {
	                        // 第1561行：如果选项组有选项项
	                        group.items.forEach((item, itemIndex) => {
	                            // 第1562行：遍历选项项
	                            addOptionItemToGroup(groupId, item.name, item.addPrice || 0);  // 第1563行：添加选项项到组
	                        });
	                    } else {
	                        // 第1564行：如果没有选项项，添加一个默认的
	                        addOptionItemToGroup(groupId, '选项1', 0);  // 第1565行：添加默认选项项
	                    }
	                });
	            } else {
	                // 第1566行：如果没有选项组，添加一个默认的
	                addOptionGroup();  // 第1567行：添加选项组
	            }
	            
	            // 第1568行：添加固定搭配
	            if (meal.fixedItems && meal.fixedItems.length > 0) {
	                // 第1569行：如果有固定搭配
	                meal.fixedItems.forEach((item, index) => {
	                    // 第1570行：遍历固定搭配项
	                    addFixedItemWithData(item.name, item.quantity || 1);  // 第1571行：添加固定搭配项
	                });
	            }
	            
	            // 第1572行：切换到添加套餐标签页
	            document.querySelector('.admin-tab[data-tab="addMeal"]').click();  // 第1573行：点击添加套餐标签页
	            
	            // 第1574行：滚动到顶部
	            document.getElementById('addMealTab').scrollIntoView({ behavior: 'smooth' });  // 第1575行：平滑滚动到添加套餐标签页
	        }  // 第1576行：函数定义结束
	        
	        // 第1577行：添加选项组
	        function addOptionGroup() {
	            // 第1578行：函数定义开始
	            const optionGroupsManagement = document.getElementById('optionGroupsManagement');  // 第1579行：获取选项组管理容器
	            const groupId = 'group-' + Date.now() + '-' + Math.random().toString(36).substr(2, 9);  // 第1580行：生成组ID
	            
	            const optionGroup = document.createElement('div');  // 第1581行：创建选项组元素
	            optionGroup.className = 'option-group-item';  // 第1582行：添加CSS类
	            optionGroup.innerHTML = `
	                <div class="option-group-header">
	                    <div class="option-group-title">选项组 ${optionGroupsManagement.children.length + 1}</div>
	                    <div>
	                        <button class="action-btn add-btn add-option-item-btn" data-group-id="${groupId}">
	                            <i class="fas fa-plus"></i> 添加选项
	                        </button>
	                        <button class="action-btn delete-btn delete-option-group-btn" data-group-id="${groupId}">
	                            <i class="fas fa-trash"></i> 删除组
	                        </button>
	                    </div>
	                </div>
	                <div class="form-row">
	                    <div class="form-group">
	                        <label class="form-label">组标题 <span class="required">*</span></label>
	                        <input type="text" class="form-input option-group-title-input" data-group-id="${groupId}" placeholder="例如：① 任选3份（可以重复选）" value="选项组 ${optionGroupsManagement.children.length + 1}">
	                    </div>
	                    <div class="form-group">
	                        <label class="form-label">规则描述 <span class="required">*</span></label>
	                        <input type="text" class="form-input option-group-rules-input" data-group-id="${groupId}" placeholder="例如：需要选择3份，可以重复选择相同选项" value="请选择选项">
	                    </div>
	                </div>
	                <div class="form-row">
	                    <div class="form-group">
	                        <label class="form-label">最少选择数量 <span class="required">*</span></label>
	                        <input type="number" class="form-input option-group-min-input" data-group-id="${groupId}" placeholder="例如：3" min="0" value="1">
	                    </div>
	                    <div class="form-group">
	                        <label class="form-label">最多选择数量 <span class="required">*</span></label>
	                        <input type="number" class="form-input option-group-max-input" data-group-id="${groupId}" placeholder="例如：3" min="1" value="1">
	                    </div>
	                </div>
	                <div class="form-row">
	                    <div class="form-group">
	                        <label class="form-label">是否可以重复选择</label>
	                        <div style="margin-top: 8px;">
	                            <label style="display: flex; align-items: center; gap: 8px;">
	                                <input type="checkbox" class="option-group-repeat-input" data-group-id="${groupId}" checked>
	                                <span>可以重复选择相同选项</span>
	                            </label>
	                        </div>
	                    </div>
	                    <div class="form-group">
	                        <label class="form-label">每个选项最多选择几份</label>
	                        <input type="number" class="form-input option-group-max-per-item-input" data-group-id="${groupId}" placeholder="例如：2" min="1" value="999">
	                    </div>
	                </div>
	                <div class="option-items-list" id="option-items-${groupId}">
	                </div>
	            `;  // 第1583行：设置选项组HTML内容
	            
	            optionGroupsManagement.appendChild(optionGroup);  // 第1584行：添加到选项组管理容器
	            
	            // 第1585行：绑定选项组按钮事件
	            optionGroup.querySelector('.add-option-item-btn').addEventListener('click', function() {
	                // 第1586行：添加添加选项按钮点击事件
	                addOptionItem(groupId);  // 第1587行：添加选项项
	            });
	            
	            optionGroup.querySelector('.delete-option-group-btn').addEventListener('click', function() {
	                // 第1588行：添加删除选项组按钮点击事件
	                deleteOptionGroup(groupId);  // 第1589行：删除选项组
	            });
	            
	            // 第1590行：添加一个默认选项项
	            addOptionItemToGroup(groupId, '选项1', 0);  // 第1591行：添加默认选项项
	        }  // 第1592行：函数定义结束
	        
	        // 第1593行：添加选项项
	        function addOptionItem(groupId) {
	            // 第1594行：函数定义开始
	            addOptionItemToGroup(groupId, '新选项', 0);  // 第1595行：添加选项项到组
	        }  // 第1596行：函数定义结束
	        
	        // 第1597行：添加选项项到指定组
	        function addOptionItemToGroup(groupId, name, price) {
	            // 第1598行：函数定义开始
	            const optionItemsList = document.getElementById(`option-items-${groupId}`);  // 第1599行：获取选项项列表容器
	            if (!optionItemsList) return;  // 第1600行：如果容器不存在，返回
	            
	            const itemId = Date.now() + Math.random();  // 第1601行：生成选项项ID
	            
	            const optionItem = document.createElement('div');  // 第1602行：创建选项项元素
	            optionItem.className = 'option-item-list-item';  // 第1603行：添加CSS类
	            optionItem.innerHTML = `
	                <div style="display: flex; gap: 10px; width: 100%;">
	                    <input type="text" class="form-input option-item-name-input" style="flex: 3;" placeholder="选项名称，例如：香辣鸡腿堡" value="${name || '选项'}">
	                    <input type="number" class="form-input option-item-price-input" style="flex: 1;" placeholder="附加价格" min="0" step="0.01" value="${price || 0}">
	                </div>
	                <button class="action-btn delete-btn delete-option-item-btn" data-item-id="${itemId}">
	                    <i class="fas fa-trash"></i>
	                </button>
	            `;  // 第1604行：设置选项项HTML内容
	            
	            optionItemsList.appendChild(optionItem);  // 第1605行：添加到选项项列表容器
	            
	            optionItem.querySelector('.delete-option-item-btn').addEventListener('click', function() {
	                // 第1606行：添加删除选项项按钮点击事件
	                deleteOptionItem(itemId);  // 第1607行：删除选项项
	            });
	        }  // 第1608行：函数定义结束
	        
	        // 第1609行：删除选项组
	        function deleteOptionGroup(groupId) {
	            // 第1610行：函数定义开始
	            const groupElement = document.querySelector(`.option-group-item [data-group-id="${groupId}"]`).closest('.option-group-item');  // 第1611行：获取选项组元素
	            if (groupElement) {
	                // 第1612行：如果选项组元素存在
	                groupElement.remove();  // 第1613行：删除选项组元素
	            }
	        }  // 第1614行：函数定义结束
	        
	        // 第1615行：删除选项项
	        function deleteOptionItem(itemId) {
	            // 第1616行：函数定义开始
	            const itemElement = document.querySelector(`[data-item-id="${itemId}"]`).closest('.option-item-list-item');  // 第1617行：获取选项项元素
	            if (itemElement) {
	                // 第1618行：如果选项项元素存在
	                itemElement.remove();  // 第1619行：删除选项项元素
	            }
	        }  // 第1620行：函数定义结束
	        
	        // 第1621行：添加固定搭配项
	        function addFixedItem() {
	            // 第1622行：函数定义开始
	            addFixedItemWithData('固定搭配项', 1);  // 第1623行：添加固定搭配项
	        }  // 第1624行：函数定义结束
	        
	        // 第1625行：添加带数据的固定搭配项
	        function addFixedItemWithData(name, quantity) {
	            // 第1626行：函数定义开始
	            const fixedItemsManagement = document.getElementById('fixedItemsManagement');  // 第1627行：获取固定搭配管理容器
	            if (!fixedItemsManagement) return;  // 第1628行：如果容器不存在，返回
	            
	            const fixedItem = document.createElement('div');  // 第1629行：创建固定搭配项元素
	            fixedItem.className = 'fixed-item-list-item';  // 第1630行：添加CSS类
	            fixedItem.innerHTML = `
	                <div style="display: flex; gap: 10px; width: 100%;">
	                    <input type="text" class="form-input fixed-item-name-input" style="flex: 3;" placeholder="固定搭配项名称，例如：可乐" value="${name || '固定搭配项'}">
	                    <input type="number" class="form-input fixed-item-quantity-input" style="flex: 1;" placeholder="数量" min="1" value="${quantity || 1}">
	                </div>
	                <button class="action-btn delete-btn delete-fixed-item-btn">
	                    <i class="fas fa-trash"></i>
	                </button>
	            `;  // 第1631行：设置固定搭配项HTML内容
	            
	            fixedItemsManagement.appendChild(fixedItem);  // 第1632行：添加到固定搭配管理容器
	            
	            fixedItem.querySelector('.delete-fixed-item-btn').addEventListener('click', function() {
	                // 第1633行：添加删除固定搭配项按钮点击事件
	                fixedItem.remove();  // 第1634行：删除固定搭配项
	            });
	        }  // 第1635行：函数定义结束
	        
	        // 第1636行：删除套餐
	        async function deleteMeal(mealId) {
	            // 第1637行：异步函数定义开始
	            const meal = meals.find(m => (m.objectId === mealId) || (m.id === mealId));  // 第1638行：查找套餐
	            if (!meal) return;  // 第1639行：如果没找到套餐，返回
	            
	            if (!confirm(`确定要删除套餐 "${meal.name}" 吗？\n\n价格：¥${meal.price}\n标签：${Array.isArray(meal.tags) ? meal.tags.join(', ') : meal.tags}\n\n此操作不可恢复！`)) {
	                // 第1640行：如果用户取消
	                return;  // 第1641行：返回
	            }
	            
	            try {
	                // 第1642行：尝试删除套餐
	                // 第1643行：从LeanCloud删除
	                await deleteMealFromCloud(mealId);  // 第1644行：从云端删除套餐
	                
	                // 第1645行：从本地数组删除
	                const mealIndex = meals.findIndex(m => (m.objectId === mealId) || (m.id === mealId));  // 第1646行：查找套餐索引
	                if (mealIndex !== -1) {
	                    // 第1647行：如果找到套餐
	                    meals.splice(mealIndex, 1);  // 第1648行：从数组中删除
	                }
	                
	                // 第1649行：刷新显示
	                const activeFilter = document.querySelector('.meal-filter-btn.active').dataset.mealFilter;  // 第1650行：获取当前筛选类型
	                updateMealList(activeFilter);  // 第1651行：更新套餐列表
	                
	                // 第1652行：更新主页
	                updateHomePage();  // 第1653行：更新首页
	                
	                showNotification(`套餐"${meal.name}"已删除`, 'success');  // 第1654行：显示成功通知
	            } catch (error) {
	                // 第1655行：捕获删除错误
	                console.error("删除套餐失败:", error);  // 第1656行：错误日志
	                showNotification("删除套餐失败，请重试", "error");  // 第1657行：显示错误通知
	            }
	        }  // 第1658行：异步函数定义结束
	        
	        // 第1659行：保存套餐
// 修改后的调用代码
async function saveMeal() {
  try {
    // 收集表单数据
    const mealData = {
      name: document.getElementById('meal-name').value,
      description: document.getElementById('meal-description').value,
      price: parseFloat(document.getElementById('meal-price').value),
      // 其他字段...
      // 注意：不要手动设置 updatedAt 和 createdAt
    };
    
    // 如果有 objectId 表示是更新
    if (currentMealId) {
      mealData.objectId = currentMealId;
    }
    
    // 保存到云端
    const savedMeal = await saveMealToCloud(mealData);
    
    // 处理保存成功后的逻辑
    console.log('保存成功:', savedMeal);
    alert('套餐保存成功！');
    
  } catch (error) {
    console.error('保存失败:', error);
    alert('保存失败：' + error.message);
  }
} // 第1760行：异步函数定义结束
	        
	        // 第1761行：取消编辑
	        function cancelEdit() {
	            // 第1762行：函数定义开始
	            resetMealForm();  // 第1763行：重置套餐表单
	            document.querySelector('.admin-tab[data-tab="meals"]').click();  // 第1764行：切换到套餐管理标签页
	        }  // 第1765行：函数定义结束
	        
	        // 第1766行：重置套餐表单
	        function resetMealForm() {
	            // 第1767行：函数定义开始
	            document.getElementById('currentMealId').value = '';  // 第1768行：清空当前套餐ID
	            document.getElementById('mealName').value = '';  // 第1769行：清空套餐名称
	            document.getElementById('mealPrice').value = '';  // 第1770行：清空套餐价格
	            document.getElementById('mealTags').value = '';  // 第1771行：清空套餐标签
	            document.getElementById('mealDescription').value = '';  // 第1772行：清空套餐描述
	            document.getElementById('mealActive').checked = true;  // 第1773行：重置套餐状态为选中
	            
	            // 第1774行：更新状态文本
	            const statusText = document.getElementById('statusText');  // 第1775行：获取状态文本元素
	            statusText.textContent = '上架';  // 第1776行：设置文本为上架
	            statusText.className = 'status-active';  // 第1777行：设置激活样式
	            
	            // 第1778行：清空选项组和固定搭配
	            document.getElementById('optionGroupsManagement').innerHTML = '';  // 第1779行：清空选项组管理容器
	            document.getElementById('fixedItemsManagement').innerHTML = '';  // 第1780行：清空固定搭配管理容器
	            
	            // 第1781行：重置标题
	            document.getElementById('addMealTitle').innerHTML = `<i class="fas fa-plus-circle"></i> 添加新套餐`;  // 第1782行：重置标题
	            
	            // 第1783行：隐藏取消编辑按钮
	            document.getElementById('cancelEditBtn').style.display = 'none';  // 第1784行：隐藏取消编辑按钮
	            
	            // 第1785行：添加一个默认选项组
	            addOptionGroup();  // 第1786行：添加选项组
	        }  // 第1787行：函数定义结束
	        
	        // 第1788行：初始化图片预览
	        function initImagePreview() {
	            // 第1789行：函数定义开始
	            const imageModal = document.getElementById('imageModal');  // 第1790行：获取图片模态框
	            const modalImage = document.getElementById('modalImage');  // 第1791行：获取模态框图片
	            const closeModal = document.getElementById('closeModal');  // 第1792行：获取关闭模态框按钮
	            
	            closeModal.addEventListener('click', function() {
	                // 第1793行：添加关闭按钮点击事件
	                imageModal.classList.remove('active');  // 第1794行：隐藏图片模态框
	            });
	            
	            imageModal.addEventListener('click', function(e) {
	                // 第1795行：添加模态框点击事件
	                if (e.target === imageModal) {
	                    // 第1796行：如果点击的是模态框背景
	                    imageModal.classList.remove('active');  // 第1797行：隐藏图片模态框
	                }
	            });
	        }  // 第1798行：函数定义结束
	        
	        // 第1799行：显示完整图片
	        function showFullImage(imageSrc) {
	            // 第1800行：函数定义开始
	            const modalImage = document.getElementById('modalImage');  // 第1801行：获取模态框图片
	            const imageModal = document.getElementById('imageModal');  // 第1802行：获取图片模态框
	            
	            modalImage.src = imageSrc;  // 第1803行：设置图片源
	            imageModal.classList.add('active');  // 第1804行：显示图片模态框
	        }  // 第1805行：函数定义结束
	        
	        // 第1806行：更新订单徽章
	        function updateOrderBadge() {
	            // 第1807行：函数定义开始
	            const badge = document.getElementById('newOrderBadge');  // 第1808行：获取新订单徽章
	            if (newOrdersCount > 0) {
	                // 第1809行：如果有新订单
	                badge.textContent = newOrdersCount > 9 ? '9+' : newOrdersCount;  // 第1810行：设置徽章文本
	                badge.style.display = 'flex';  // 第1811行：显示徽章
	            } else {
	                // 第1812行：如果没有新订单
	                badge.style.display = 'none';  // 第1813行：隐藏徽章
	            }
	        }  // 第1814行：函数定义结束
	        
	        // 第1815行：显示通知
	        function showNotification(message, type = 'info') {
	            // 第1816行：函数定义开始
	            const notification = document.createElement('div');  // 第1817行：创建通知元素
	            notification.textContent = message;  // 第1818行：设置通知文本
	            notification.style.cssText = `
	                position: fixed;
	                top: 20px;
	                right: 20px;
	                background-color: ${type === 'success' ? '#4CAF50' : type === 'error' ? '#e31837' : '#e31837'};
	                color: white;
	                padding: 15px 20px;
	                border-radius: 8px;
	                box-shadow: 0 5px 15px rgba(0,0,0,0.2);
	                z-index: 1000;
	                font-weight: bold;
	                animation: slideIn 0.3s ease;
	                max-width: 400px;
	            `;  // 第1819行：设置通知样式
	            
	            // 第1820行：添加动画样式
	            const style = document.createElement('style');  // 第1821行：创建样式元素
	            style.textContent = `
	                @keyframes slideIn {
	                    from { transform: translateX(100%); opacity: 0; }
	                    to { transform: translateX(0); opacity: 1; }
	                }
	                @keyframes slideOut {
	                    from { transform: translateX(0); opacity: 1; }
	                    to { transform: translateX(100%); opacity: 0; }
	                }
	            `;  // 第1822行：设置动画样式
	            document.head.appendChild(style);  // 第1823行：添加到文档头部
	            
	            document.body.appendChild(notification);  // 第1824行：添加到文档主体
	            
	            setTimeout(() => {
	                // 第1825行：设置定时器
	                notification.style.animation = 'slideOut 0.3s ease';  // 第1826行：添加滑出动画
	                setTimeout(() => {
	                    // 第1827行：设置定时器
	                    if (notification.parentNode) {
	                        // 第1828行：如果通知元素还在文档中
	                        document.body.removeChild(notification);  // 第1829行：移除通知元素
	                    }
	                }, 300);  // 第1830行：300毫秒后执行
	            }, 3000);  // 第1831行：3000毫秒后执行
	        }  // 第1832行：函数定义结束
	        
	        // 第1833行：初始化购物车
	        function initCart() {
	            // 第1834行：函数定义开始
	            console.log("初始化购物车");  // 第1835行：日志输出
	            updateCartDisplay();  // 第1836行：更新购物车显示
	        }  // 第1837行：函数定义结束
	        
	        // 第1838行：初始化状态切换
	        function initStatusToggle() {
	            // 第1839行：函数定义开始
	            const statusToggle = document.getElementById('mealActive');  // 第1840行：获取状态切换按钮
	            const statusText = document.getElementById('statusText');  // 第1841行：获取状态文本元素
	            
	            if (statusToggle && statusText) {
	                // 第1842行：如果元素都存在
	                statusToggle.addEventListener('change', function() {
	                    // 第1843行：添加变化事件
	                    if (this.checked) {
	                        // 第1844行：如果选中
	                        statusText.textContent = '上架';  // 第1845行：设置文本为上架
	                        statusText.className = 'status-active';  // 第1846行：设置激活样式
	                    } else {
	                        // 第1847行：如果未选中
	                        statusText.textContent = '下架';  // 第1848行：设置文本为下架
	                        statusText.className = 'status-inactive';  // 第1849行：设置未激活样式
	                    }
	                });
	            }
	        }  // 第1850行：函数定义结束
	        
	        // 第1851行：初始化我的订单页面
	        function initMyOrdersPage() {
	            // 第1852行：函数定义开始
	            const orderSearchBtn = document.getElementById('orderSearchBtn');  // 第1853行：获取订单搜索按钮
	            const orderSearchInput = document.getElementById('orderSearchInput');  // 第1854行：获取订单搜索输入框
	            
	            orderSearchBtn.addEventListener('click', function() {
	                // 第1855行：添加搜索按钮点击事件
	                const searchTerm = orderSearchInput.value.trim();  // 第1856行：获取搜索关键词
	                if (searchTerm) {
	                    // 第1857行：如果有关键词
	                    searchUserOrder(searchTerm);  // 第1858行：搜索用户订单
	                } else {
	                    // 第1859行：如果没有关键词
	                    renderUserOrders('all');  // 第1860行：渲染所有用户订单
	                }
	            });
	            
	            orderSearchInput.addEventListener('keypress', function(e) {
	                // 第1861行：添加搜索输入框按键事件
	                if (e.key === 'Enter') {
	                    // 第1862行：如果按下回车键
	                    orderSearchBtn.click();  // 第1863行：触发搜索按钮点击
	                }
	            });
	            
	            document.querySelectorAll('.order-filter-tab').forEach(tab => {
	                // 第1864行：遍历所有订单筛选标签
	                tab.addEventListener('click', function() {
	                    // 第1865行：添加点击事件
	                    document.querySelectorAll('.order-filter-tab').forEach(t => {
	                        // 第1866行：移除所有标签的激活类
	                        t.classList.remove('active');  // 第1867行：移除激活类
	                    });
	                    
	                    this.classList.add('active');  // 第1868行：添加当前标签的激活类
	                    
	                    const filter = this.dataset.orderFilter;  // 第1869行：获取筛选类型
	                    renderUserOrders(filter);  // 第1870行：渲染用户订单
	                });
	            });
	        }  // 第1871行：函数定义结束
	        
	        // 第1872行：显示我的订单页面
	        function showMyOrdersPage() {
	            // 第1873行：函数定义开始
	            showPage('myOrdersPage');  // 第1874行：显示我的订单页面
	            renderUserOrders('all');  // 第1875行：渲染所有用户订单
	            
	            // 第1876行：切换头部按钮显示
	            document.getElementById('viewOrdersBtn').style.display = 'none';  // 第1877行：隐藏查看订单按钮
	            document.getElementById('viewHomeBtn').style.display = 'flex';  // 第1878行：显示返回首页按钮
	        }  // 第1879行：函数定义结束
	        
	        // 第1880行：渲染用户订单
	        function renderUserOrders(filter = 'all') {
	            // 第1881行：函数定义开始
	            const myOrdersContainer = document.getElementById('myOrdersContainer');  // 第1882行：获取我的订单容器
	            const noUserOrdersMessage = document.getElementById('noUserOrdersMessage');  // 第1883行：获取无订单提示
	            const loadingOrders = document.getElementById('loadingOrders');  // 第1884行：获取加载提示
	            
	            // 第1885行：隐藏加载提示
	            if (loadingOrders) {
	                loadingOrders.style.display = 'none';  // 第1886行：隐藏加载提示
	            }
	            
	            myOrdersContainer.innerHTML = '';  // 第1887行：清空我的订单容器
	            
	            // 第1888行：过滤当前用户的订单
	            let userOrders = orders.filter(order => order.userId === currentUserId);  // 第1889行：过滤用户订单
	            
	            if (filter !== 'all') {
	                // 第1890行：如果不是全部订单
	                userOrders = userOrders.filter(order => order.status === filter);  // 第1891行：按状态筛选
	            }
	            
	            // 第1892行：按时间降序排序
	            userOrders.sort((a, b) => new Date(b.timestamp) - new Date(a.timestamp));  // 第1893行：排序
	            
	            if (userOrders.length === 0) {
	                // 第1894行：如果没有订单
	                noUserOrdersMessage.style.display = 'block';  // 第1895行：显示无订单提示
	                return;  // 第1896行：返回
	            }
	            
	            noUserOrdersMessage.style.display = 'none';  // 第1897行：隐藏无订单提示
	            
	            // 第1898行：渲染用户订单
	            userOrders.forEach(order => {
	                // 第1899行：遍历用户订单
	                const orderElement = createUserOrderElement(order);  // 第1900行：创建用户订单元素
	                myOrdersContainer.appendChild(orderElement);  // 第1901行：添加到我的订单容器
	            });
	        }  // 第1902行：函数定义结束
	        
	        // 第1903行：创建用户订单元素
	        function createUserOrderElement(order) {
	            // 第1904行：函数定义开始
	            const orderElement = document.createElement('div');  // 第1905行：创建订单元素
	            orderElement.className = 'user-order-item';  // 第1906行：添加CSS类
	            
	            let statusText, statusClass;  // 第1907行：声明状态文本和样式类变量
	            switch(order.status) {
	                // 第1908行：根据订单状态设置
	                case 'new':
	                    statusText = '新订单';  // 第1909行：新订单
	                    statusClass = 'user-status-new';  // 第1910行：新订单样式
	                    break;
	                case 'processing':
	                    statusText = '处理中';  // 第1911行：处理中
	                    statusClass = 'user-status-processing';  // 第1912行：处理中样式
	                    break;
	                case 'completed':
	                    statusText = '已完成';  // 第1913行：已完成
	                    statusClass = 'user-status-completed';  // 第1914行：已完成样式
	                    break;
	                default:
	                    statusText = '新订单';  // 第1915行：默认新订单
	                    statusClass = 'user-status-new';  // 第1916行：默认新订单样式
	            }
	            
	            const deliveryTypeText = order.deliveryType === 'delivery' ? '宅急送' : '到店自提';  // 第1917行：配送类型文本
	            
	            let itemsHTML = '';  // 第1918行：初始化项目HTML
	            order.cart.forEach((item, index) => {
	                // 第1919行：遍历订单中的购物车项目
	                const optionCount = {};  // 第1920行：初始化选项计数对象
	                item.options.forEach(option => {
	                    // 第1921行：统计每个选项的数量
	                    optionCount[option] = (optionCount[option] || 0) + 1;  // 第1922行：计数
	                });
	                
	                const optionText = Object.keys(optionCount).map(option => {
	                    // 第1923行：构建选项文本
	                    const count = optionCount[option];  // 第1924行：获取选项数量
	                    return `${option}${count > 1 ? ` ×${count}` : ''}`;  // 第1925行：返回选项文本
	                }).join(', ');  // 第1926行：用逗号连接
	                
	                itemsHTML += `<div class="user-order-item-detail">
	                    <div class="user-order-item-name">
	                        <div><strong>${item.name}</strong></div>
	                        <div style="font-size:0.9rem; color:#666;">${optionText}</div>
	                    </div>
	                    <div class="user-order-item-price">¥${item.totalPrice.toFixed(2)}</div>
	                </div>`;  // 第1927行：添加到项目HTML
	            });
	            
	            const infoLines = order.deliveryInfo.split('\n');  // 第1928行：分割配送信息为行
	            let deliveryHTML = '';  // 第1929行：初始化配送信息HTML
	            infoLines.forEach(line => {
	                // 第1930行：遍历配送信息行
	                if (line.trim()) {
	                    // 第1931行：如果行不为空
	                    deliveryHTML += `<p>${line}</p>`;  // 第1932行：添加到配送信息HTML
	                }
	            });
	            
	            let screenshotHTML = '';  // 第1933行：初始化截图HTML
	            if (order.hasScreenshot && order.screenshotData) {
	                // 第1934行：如果有截图
	                screenshotHTML = `
	                    <div class="screenshot-container">
	                        <p><strong>门店截图：</strong></p>
	                        <img src="${order.screenshotData}" alt="门店截图" class="screenshot-thumbnail" data-order-id="${order.objectId || order.id}">
	                    </div>
	                `;  // 第1935行：添加截图HTML
	            }
	            
	            orderElement.innerHTML = `
	                <div class="user-order-header">
	                    <div>
	                        <div class="user-order-id">订单号：${order.id}</div>
	                        <div class="user-order-time">${order.timestamp} | ${deliveryTypeText}</div>
	                    </div>
	                    <div class="user-order-status ${statusClass}">${statusText}</div>
	                </div>
	                
	                <div class="user-order-items">
	                    ${itemsHTML}
	                </div>
	                
	                <div class="user-order-total">
	                    总计：¥${order.totalPrice.toFixed(2)}
	                </div>
	                
	                <div class="user-order-info">
	                    ${deliveryHTML}
	                    ${order.orderNote ? `<p><strong>备注：</strong>${order.orderNote}</p>` : ''}
	                    ${screenshotHTML}
	                </div>
	            `;  // 第1936行：设置订单元素HTML内容
	            
	            if (order.hasScreenshot && order.screenshotData) {
	                // 第1937行：如果有截图
	                const screenshotImg = orderElement.querySelector('.screenshot-thumbnail');  // 第1938行：获取截图图片
	                if (screenshotImg) {
	                    // 第1939行：如果截图图片存在
	                    screenshotImg.addEventListener('click', function() {
	                        // 第1940行：添加点击事件
	                        showFullImage(order.screenshotData);  // 第1941行：显示完整图片
	                    });
	                }
	            }
	            
	            return orderElement;  // 第1942行：返回订单元素
	        }  // 第1943行：函数定义结束
	        
	        // 第1944行：搜索用户订单
	        function searchUserOrder(searchTerm) {
	            // 第1945行：函数定义开始
	            const myOrdersContainer = document.getElementById('myOrdersContainer');  // 第1946行：获取我的订单容器
	            const noUserOrdersMessage = document.getElementById('noUserOrdersMessage');  // 第1947行：获取无订单提示
	            
	            myOrdersContainer.innerHTML = '';  // 第1948行：清空我的订单容器
	            
	            // 第1949行：搜索订单
	            const searchResults = orders.filter(order => 
	                order.userId === currentUserId && 
	                order.id.toLowerCase().includes(searchTerm.toLowerCase())  // 第1950行：按订单ID搜索
	            );
	            
	            // 第1951行：按时间降序排序
	            searchResults.sort((a, b) => new Date(b.timestamp) - new Date(a.timestamp));  // 第1952行：排序
	            
	            if (searchResults.length === 0) {
	                // 第1953行：如果没有搜索结果
	                noUserOrdersMessage.style.display = 'block';  // 第1954行：显示无订单提示
	                noUserOrdersMessage.innerHTML = `
	                    <i class="fas fa-search"></i>
	                    <h3>未找到相关订单</h3>
	                    <p>没有找到订单号包含"${searchTerm}"的订单</p>
	                `;  // 第1955行：设置无订单提示内容
	                return;  // 第1956行：返回
	            }
	            
	            noUserOrdersMessage.style.display = 'none';  // 第1957行：隐藏无订单提示
	            
	            // 第1958行：渲染搜索结果
	            searchResults.forEach(order => {
	                // 第1959行：遍历搜索结果
	                const orderElement = createUserOrderElement(order);  // 第1960行：创建用户订单元素
	                myOrdersContainer.appendChild(orderElement);  // 第1961行：添加到我的订单容器
	            });
	        }  // 第1962行：函数定义结束
	        
	        // 第1963行：初始化头部按钮
	        function initHeaderButtons() {
	            // 第1964行：函数定义开始
	            const viewOrdersBtn = document.getElementById('viewOrdersBtn');  // 第1965行：获取查看订单按钮
	            const viewHomeBtn = document.getElementById('viewHomeBtn');  // 第1966行：获取返回首页按钮
	            
	            viewOrdersBtn.addEventListener('click', function() {
	                // 第1967行：添加查看订单按钮点击事件
	                showMyOrdersPage();  // 第1968行：显示我的订单页面
	            });
	            
	            viewHomeBtn.addEventListener('click', function() {
	                // 第1969行：添加返回首页按钮点击事件
	                showPage('homePage');  // 第1970行：显示首页
	                this.style.display = 'none';  // 第1971行：隐藏返回首页按钮
	                viewOrdersBtn.style.display = 'flex';  // 第1972行：显示查看订单按钮
	            });
	        }  // 第1973行：函数定义结束
	        
	        // 第1974行：检查URL参数
	        function checkUrlParams() {
	            // 第1975行：函数定义开始
	            const urlParams = new URLSearchParams(window.location.search);  // 第1976行：获取URL参数
	            const orderId = urlParams.get('order');  // 第1977行：获取订单ID参数
	            
	            if (orderId) {
	                // 第1978行：如果有订单ID参数
	                showMyOrdersPage();  // 第1979行：显示我的订单页面
	                
	                setTimeout(() => {
	                    // 第1980行：延迟执行
	                    document.getElementById('orderSearchInput').value = orderId;  // 第1981行：设置搜索框值为订单ID
	                    searchUserOrder(orderId);  // 第1982行：搜索用户订单
	                }, 100);  // 第1983行：100毫秒后执行
	            }
	        }  // 第1984行：函数定义结束
	        
	        // 第1985行：添加高亮动画样式
	        const highlightStyle = document.createElement('style');  // 第1986行：创建样式元素
	        highlightStyle.textContent = `
	            @keyframes highlightOrder {
	                0% { box-shadow: 0 0 0 0 rgba(227, 24, 55, 0.7); }
	                70% { box-shadow: 0 0 0 10px rgba(227, 24, 55, 0); }
	                100% { box-shadow: 0 0 0 0 rgba(227, 24, 55, 0); }
	            }
	        `;  // 第1987行：设置高亮动画样式
	        document.head.appendChild(highlightStyle);  // 第1988行：添加到文档头部
	        
	        // 第1989行：添加加载消息样式
	        const loadingStyle = document.createElement('style');  // 第1990行：创建样式元素
	        loadingStyle.textContent = `
	            .loading-message {
	                text-align: center;
	                padding: 40px;
	                color: #666;
	                font-size: 1.2rem;
	            }
	            .loading-message i {
	                margin-right: 10px;
	                color: #e31837;
	            }
	        `;  // 第1991行：设置加载消息样式
	        document.head.appendChild(loadingStyle);  // 第1992行：添加到文档头部
	        
	        // 第1993行：JavaScript代码结束
	        console.log("LeanCloud集成代码加载完成");  // 第1994行：完成日志
	    </script>
		</body>
		<!-- 第1995行：页面主体结束 -->
		</html>
		<!-- 第1996行：HTML文档结束 -->
